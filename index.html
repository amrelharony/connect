<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Amr Elharony | Delivery Lead | Mentor | Fintech Author & Speaker</title>
    <meta name="description" content="Amr Elharony ‚Äî Scrum Master at Banque Misr, FinTech author, and globally recognized mentor. Bridging banking and technology to deliver measurable digital transformation across MENA.">
    <meta name="author" content="Amr Elharony">
    <link rel="canonical" href="https://amrelharony.com">
    <meta property="og:type" content="profile"><meta property="og:title" content="Amr Elharony ‚Äî Delivery Lead ¬∑ Mentor ¬∑ Fintech Author">
    <meta property="og:description" content="Bridging banking and technology to deliver measurable digital transformation. Author of The Bilingual Executive. 1,000+ mentoring minutes on ADPList.">
    <meta property="og:url" content="https://amrelharony.com"><meta property="og:image" content="https://amrelharony.com/profile.jpg">
    <meta property="og:site_name" content="Amr Elharony"><meta property="profile:first_name" content="Amr"><meta property="profile:last_name" content="Elharony">
    <meta name="twitter:card" content="summary"><meta name="twitter:title" content="Amr Elharony ‚Äî Delivery Lead ¬∑ Mentor ¬∑ Fintech Author">
    <meta name="twitter:description" content="Bridging banking and technology to deliver measurable digital transformation across MENA.">
    <meta name="twitter:image" content="https://amrelharony.com/profile.jpg">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Amr Elharony","url":"https://amrelharony.com","image":"https://amrelharony.com/profile.jpg","jobTitle":"Scrum Master","worksFor":{"@type":"Organization","name":"Banque Misr"},"description":"Delivery Lead, Mentor, FinTech Author & Speaker bridging banking and technology across MENA.","alumniOf":[{"@type":"CollegeOrUniversity","name":"Helwan University Cairo"},{"@type":"CollegeOrUniversity","name":"Frankfurt School of Finance & Management"}],"knowsAbout":["FinTech","Agile","Scrum","Digital Transformation","Data Analytics","Banking"],"sameAs":["https://www.linkedin.com/in/amrmelharony","https://t.me/Amrmelharony","https://adplist.org/mentors/amr-elharony"]}</script>
    <script>window.va=window.va||function(){(window.va.q=window.va.q||[]).push(arguments);};</script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&family=Noto+Sans+Arabic:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>tailwind.config={theme:{extend:{fontFamily:{sans:['Inter','sans-serif'],mono:['JetBrains Mono','monospace'],ar:['Noto Sans Arabic','sans-serif']}}}}</script>
<style>
:root{--bg:#06080f;--bg2:#0c1018;--text:#f0f2f5;--sub:#6b7a90;--accent:#00e1ff;--accent2:#6366f1;--accent3:#a855f7;--card:rgba(255,255,255,0.025);--border:rgba(255,255,255,0.06);--cardH:rgba(255,255,255,0.07);--glow:rgba(0,225,255,0.15);--glowS:rgba(0,225,255,0.4)}
.light-mode{--bg:#f4f6fb;--bg2:#fff;--text:#0a0f1a;--sub:#5a6578;--accent:#0066ff;--accent2:#4f46e5;--accent3:#9333ea;--card:rgba(255,255,255,0.7);--border:rgba(0,0,0,0.06);--cardH:rgba(255,255,255,0.95);--glow:rgba(0,102,255,0.08);--glowS:rgba(0,102,255,0.2)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);overflow:hidden;-webkit-tap-highlight-color:transparent;transition:background .6s,color .6s}
@media(prefers-reduced-motion:reduce){*,*::before,*::after{animation-duration:0.01ms!important;animation-iteration-count:1!important;transition-duration:0.01ms!important}#preloader{display:none!important}#app{opacity:1!important}.rv{opacity:1!important;transform:none!important}body{overflow:auto!important;overflow-x:hidden!important}}

/* PRELOADER */
#preloader{position:fixed;inset:0;background:var(--bg);z-index:10000;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:background .6s}
.pre-line{font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--sub);opacity:0}
.pre-ctr{font-family:'JetBrains Mono',monospace;font-size:72px;font-weight:700;color:var(--text);line-height:1;margin:16px 0;opacity:0}
.pre-bar{width:200px;height:1px;background:var(--border);position:relative;overflow:hidden;opacity:0}
.pre-fill{position:absolute;top:0;left:0;height:100%;width:0%;background:var(--accent);box-shadow:0 0 20px var(--glowS)}
.pre-stage{margin-top:24px;font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--accent);opacity:0;height:14px}

#bgC{position:fixed;inset:0;z-index:0}
.mesh{position:fixed;inset:0;z-index:-1;opacity:.4}
.mesh div{position:absolute;border-radius:50%;filter:blur(100px)}
.mesh .b1{width:50vw;height:50vw;background:var(--accent);opacity:.08;top:-15%;left:-10%;animation:mf1 20s ease-in-out infinite}
.mesh .b2{width:40vw;height:40vw;background:var(--accent2);opacity:.06;bottom:-10%;right:-10%;animation:mf2 25s ease-in-out infinite}
.mesh .b3{width:35vw;height:35vw;background:var(--accent3);opacity:.05;top:50%;left:50%;transform:translate(-50%,-50%);animation:mf3 18s ease-in-out infinite}
@keyframes mf1{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(5vw,8vh) scale(1.1)}66%{transform:translate(-3vw,-5vh) scale(.95)}}
@keyframes mf2{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(-8vw,-4vh) scale(1.15)}66%{transform:translate(4vw,6vh) scale(.9)}}
@keyframes mf3{0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-45%,-55%) scale(1.2)}}
.noise{position:fixed;inset:0;z-index:9998;pointer-events:none;opacity:.02;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");mix-blend-mode:overlay}
.cg{position:fixed;width:300px;height:300px;border-radius:50%;pointer-events:none;z-index:1;background:radial-gradient(circle,var(--glow) 0%,transparent 70%);transform:translate(-50%,-50%);opacity:0;transition:opacity .3s}
.cg.on{opacity:1}
.cd{position:fixed;width:6px;height:6px;background:var(--accent);border-radius:50%;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);transition:width .25s cubic-bezier(.16,1,.3,1),height .25s cubic-bezier(.16,1,.3,1),background .25s,border .25s}
.cd.hov{width:44px;height:44px;background:transparent;border:1.5px solid var(--accent);opacity:.5}
@media(pointer:coarse){.cg,.cd{display:none!important}}
.sbar{position:fixed;top:0;left:0;height:2px;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));z-index:1000}

/* TOP BUTTONS */
.top-btns{position:fixed;top:16px;right:16px;z-index:100;display:flex;gap:8px}
.tbtn{width:36px;height:36px;border-radius:50%;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);color:var(--sub);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;transition:all .3s}
.tbtn:hover,.tbtn:focus-visible{color:var(--accent);border-color:var(--accent);transform:rotate(20deg) scale(1.05);outline:none}
.lang-btn{font-size:11px;font-weight:700;font-family:'JetBrains Mono',monospace}
.lang-btn:hover,.lang-btn:focus-visible{transform:scale(1.05);rotate:0deg}

#app{position:relative;z-index:2;width:100%;max-width:480px;margin:0 auto;padding:48px 24px 120px;opacity:0}
.rv{opacity:0;transform:translateY(30px)}

/* STATUS */
.st{display:inline-flex;align-items:center;gap:8px;padding:4px 12px;border-radius:100px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:var(--sub)}
.sd{width:6px;height:6px;border-radius:50%;position:relative;flex-shrink:0}
.sd::after{content:'';position:absolute;inset:-3px;border-radius:50%;background:inherit;opacity:.4;animation:sp 2s ease-in-out infinite}
@keyframes sp{0%,100%{transform:scale(1);opacity:.4}50%{transform:scale(2);opacity:0}}

.pf{position:relative;width:120px;height:120px;margin:24px auto 8px;cursor:pointer}
.pf svg{position:absolute;inset:-8px;width:calc(100% + 16px);height:calc(100% + 16px)}
.pf svg circle{fill:none;stroke-width:1.5;stroke-linecap:round;stroke-dasharray:8 6;animation:rr 12s linear infinite;transform-origin:center}
@keyframes rr{to{transform:rotate(360deg)}}
.pfi{width:100%;height:100%;border-radius:50%;overflow:hidden;position:relative;z-index:2}
.pfi img{width:100%;height:100%;object-fit:cover;transition:transform .6s cubic-bezier(.16,1,.3,1)}
.pf:hover .pfi img{transform:scale(1.08)}
.fc{perspective:1000px;width:100%;height:100%;border-radius:50%}
.fi{position:relative;width:100%;height:100%;transition:transform .8s cubic-bezier(.175,.885,.32,1.275);transform-style:preserve-3d}
.fi.flipped{transform:rotateY(180deg)}
.ff,.fb{position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;border-radius:50%;overflow:hidden}
.fb{transform:rotateY(180deg);background:var(--bg2);display:flex;align-items:center;justify-content:center;border:2px solid var(--border)}
.qb{position:absolute;bottom:2px;right:2px;width:24px;height:24px;background:var(--accent);border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:10;box-shadow:0 2px 8px rgba(0,0,0,.3);transition:transform .3s cubic-bezier(.16,1,.3,1)}
.pf:hover .qb{transform:scale(1.15)}
.qb i{font-size:10px;color:var(--bg)}
.ph{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.4;text-align:center;letter-spacing:1px;margin-bottom:20px}

.hn{font-size:28px;font-weight:800;text-align:center;letter-spacing:-.5px;line-height:1.2}
.ng{background:linear-gradient(135deg,var(--accent),var(--accent2));background-size:200% 200%;-webkit-background-clip:text;background-clip:text;color:transparent;animation:ns 6s ease-in-out infinite}
@keyframes ns{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
.sg{color:var(--accent);opacity:.5}
.vp{text-align:center;font-size:14px;color:var(--sub);line-height:1.6;margin:12px 0 4px;max-width:380px;margin-left:auto;margin-right:auto}
.vp strong{color:var(--text);font-weight:600}
.rl{display:flex;flex-wrap:wrap;justify-content:center;gap:6px;margin-top:10px}
.rt{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:1.5px;text-transform:uppercase;padding:4px 10px;border-radius:4px;background:var(--card);border:1px solid var(--border);color:var(--sub);backdrop-filter:blur(10px);transition:all .3s}
.rt:hover{border-color:var(--accent);color:var(--accent)}

/* IMPACT STRIP */
.imp{display:flex;justify-content:center;gap:24px;margin:20px 0 4px;flex-wrap:wrap}
.imp-item{text-align:center}.imp-num{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700;color:var(--accent);line-height:1.2}
.imp-label{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;color:var(--sub);margin-top:2px}

/* SOCIAL PROOF TICKER */
.ticker-wrap{overflow:hidden;margin:16px -24px 0;position:relative}
.ticker-wrap::before,.ticker-wrap::after{content:'';position:absolute;top:0;bottom:0;width:40px;z-index:2;pointer-events:none}
.ticker-wrap::before{left:0;background:linear-gradient(90deg,var(--bg),transparent)}
.ticker-wrap::after{right:0;background:linear-gradient(90deg,transparent,var(--bg))}
.light-mode .ticker-wrap::before{background:linear-gradient(90deg,var(--bg),transparent)}
.light-mode .ticker-wrap::after{background:linear-gradient(90deg,transparent,var(--bg))}
.ticker{display:flex;animation:tickScroll 45s linear infinite;width:max-content}
.ticker:hover{animation-play-state:paused}
.tq{flex-shrink:0;padding:10px 24px;font-size:12px;color:var(--sub);font-style:italic;white-space:nowrap}
.tq strong{color:var(--text);font-style:normal;font-weight:600;font-size:10px}
@keyframes tickScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* CONFERENCE BADGES */
.conf-strip{display:flex;align-items:center;gap:16px;margin:12px 0 4px;overflow-x:auto;padding:8px 0;scrollbar-width:none;-ms-overflow-style:none;justify-content:center;flex-wrap:wrap}
.conf-strip::-webkit-scrollbar{display:none}
.conf-badge{font-family:'JetBrains Mono',monospace;font-size:7px;letter-spacing:1px;text-transform:uppercase;padding:4px 10px;border-radius:100px;background:var(--card);border:1px solid var(--border);color:var(--sub);white-space:nowrap;transition:all .3s;backdrop-filter:blur(10px)}
.conf-badge:hover{border-color:var(--accent);color:var(--accent)}

.sr{display:flex;gap:20px;justify-content:center;margin:24px 0 28px}
.si{color:var(--sub);font-size:20px;transition:color .3s,transform .3s cubic-bezier(.16,1,.3,1);position:relative;text-decoration:none}
.si:hover,.si:focus-visible{transform:translateY(-3px);outline:none}
.si::after{content:'';position:absolute;bottom:-6px;left:50%;width:0;height:2px;background:var(--accent);border-radius:1px;transform:translateX(-50%);transition:width .3s cubic-bezier(.16,1,.3,1)}
.si:hover::after,.si:focus-visible::after{width:20px}

.lk{display:flex;align-items:center;padding:14px 16px;border-radius:16px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);text-decoration:none;color:var(--text);position:relative;overflow:hidden;transition:background .3s,border-color .3s,transform .4s cubic-bezier(.16,1,.3,1),box-shadow .4s;will-change:transform}
.lk:hover,.lk:focus-visible{background:var(--cardH);border-color:rgba(0,225,255,.12);box-shadow:0 8px 32px -8px var(--glow),0 0 0 1px var(--border);outline:none}
.light-mode .lk:hover,.light-mode .lk:focus-visible{border-color:rgba(0,102,255,.15);box-shadow:0 8px 32px -8px rgba(0,0,0,.08)}
.ls{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .3s;z-index:0}
.lk:hover .ls{opacity:1}
.lm{position:absolute;inset:0;background:linear-gradient(105deg,transparent 40%,var(--glow) 50%,transparent 60%);transform:translateX(-100%);pointer-events:none;z-index:1}
.lk:hover .lm{animation:shm .8s ease forwards}
@keyframes shm{to{transform:translateX(100%)}}
.li{width:44px;height:44px;border-radius:12px;background:var(--card);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin-right:14px;flex-shrink:0;position:relative;z-index:2;transition:border-color .3s}
.lk:hover .li{border-color:rgba(0,225,255,.15)}
.li img{width:26px;height:26px;object-fit:contain}
.li .fbi{display:none;font-size:18px}
.lb{flex:1;position:relative;z-index:2}.lt{font-weight:600;font-size:14px}
.lsu{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--sub);margin-top:2px}
.la{color:var(--sub);font-size:13px;position:relative;z-index:2;transition:color .3s,transform .3s cubic-bezier(.16,1,.3,1);opacity:.4}
.lk:hover .la{opacity:1;color:var(--accent);transform:translateX(3px)}

.nd{display:flex;align-items:center;gap:12px;margin:32px 0 16px;opacity:.3}
.ndl{flex:1;height:1px;background:var(--sub)}
.ndt{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--accent);white-space:nowrap}
.nl{display:flex;align-items:center;padding:10px 14px;border-radius:12px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);text-decoration:none;color:var(--sub);font-size:13px;font-weight:500;position:relative;overflow:hidden;transition:background .3s,color .3s,border-color .3s,transform .3s cubic-bezier(.16,1,.3,1)}
.nl:hover,.nl:focus-visible{background:var(--cardH);color:var(--text);transform:translateX(4px);outline:none}
.ni{width:28px;display:flex;justify-content:center;flex-shrink:0;font-size:14px}
.nlb{flex:1;position:relative}
.nlb::after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:1px;background:var(--accent);transition:width .4s cubic-bezier(.16,1,.3,1)}
.nl:hover .nlb::after{width:100%}
.ne{font-size:10px;opacity:.3;transition:opacity .3s}.nl:hover .ne{opacity:.7}

/* CTA */
.vcb{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px 16px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--bg);font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;border:none;cursor:pointer;position:relative;overflow:hidden;transition:transform .3s cubic-bezier(.16,1,.3,1),box-shadow .3s,background .4s;margin-bottom:4px;text-decoration:none}
.vcb:hover,.vcb:focus-visible{transform:translateY(-2px);box-shadow:0 8px 24px -4px var(--glowS);outline:none;color:var(--bg)}
.vcb:active{transform:translateY(0) scale(.98)}
.vcb i{font-size:14px;transition:transform .3s}.vcb:hover i{transform:translateY(2px)}
.vcb-shim{position:absolute;inset:0;background:linear-gradient(105deg,transparent 40%,rgba(255,255,255,.2) 50%,transparent 60%);transform:translateX(-100%);pointer-events:none}
.vcb:hover .vcb-shim{animation:shm .8s ease forwards}
.vcb-done{background:linear-gradient(135deg,#22c55e,#16a34a)!important}

#contactSecret{max-height:0;overflow:hidden;opacity:0;transition:max-height .6s cubic-bezier(.16,1,.3,1),opacity .5s,margin .4s;margin:0}
#contactSecret.revealed{max-height:200px;opacity:1;margin:8px 0 4px}
#contactSecret .sr{margin:8px 0 12px}
.shake-hint{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;color:var(--sub);opacity:.25;text-align:center;transition:opacity .4s;margin-bottom:4px;display:none}
.shake-hint.shaking{opacity:.6;animation:shakeHintPulse 1s ease-in-out infinite}
.shake-hint.unlocked{opacity:.8;color:var(--accent)}
@keyframes shakeHintPulse{0%,100%{opacity:.4}50%{opacity:.8}}
.desk-hint{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;color:var(--sub);opacity:.2;text-align:center;margin-top:2px;margin-bottom:4px;display:none}
.shake-bar{width:100%;height:2px;border-radius:1px;background:var(--border);margin:4px 0 0;overflow:hidden;opacity:0;transition:opacity .3s}
.shake-bar.active{opacity:1}
.shake-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));border-radius:1px;transition:width .15s linear}

/* EASTER EGG */
#easterEgg{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .4s,visibility .4s;backdrop-filter:blur(10px);pointer-events:none}
#easterEgg.show{opacity:1;visibility:visible;pointer-events:auto}
.egg-card{max-width:360px;width:90%;padding:32px;border-radius:20px;background:var(--bg2);border:1px solid var(--border);text-align:center;transform:scale(.8);transition:transform .5s cubic-bezier(.16,1,.3,1)}
#easterEgg.show .egg-card{transform:scale(1)}
.egg-emoji{font-size:48px;margin-bottom:16px}
.egg-title{font-family:'JetBrains Mono',monospace;font-size:12px;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:12px}
.egg-text{font-size:14px;color:var(--sub);line-height:1.7}
.egg-close{margin-top:20px;font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.4;cursor:pointer}
.egg-close:hover{opacity:1;color:var(--accent)}

/* ARABIC MODE */
[dir="rtl"] .hn,[dir="rtl"] .vp,[dir="rtl"] .rt,[dir="rtl"] .lt,[dir="rtl"] .lsu,[dir="rtl"] .nlb,[dir="rtl"] .st,[dir="rtl"] .imp-label,[dir="rtl"] .tq{font-family:'Noto Sans Arabic','Inter',sans-serif}
[dir="rtl"] .vp{direction:rtl;text-align:center}
[dir="rtl"] .li{margin-right:0;margin-left:14px}

/* AVAILABILITY */
.avail{display:flex;align-items:center;justify-content:center;gap:6px;font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.5;margin:4px 0 8px;letter-spacing:.5px}.avail i{color:var(--accent);font-size:8px}
/* QUICK PROMPTS */
.qp-wrap{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin:16px 0 8px}
.qp{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1px;text-transform:uppercase;padding:6px 12px;border-radius:100px;background:var(--card);border:1px solid var(--border);color:var(--sub);text-decoration:none;transition:all .3s;backdrop-filter:blur(10px);white-space:nowrap;cursor:pointer}.qp:hover{border-color:var(--accent);color:var(--accent);background:var(--cardH);transform:translateY(-2px)}
/* READING */
.reading-card{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:12px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);margin:12px 0 0}
.reading-icon{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:16px;color:var(--bg)}
.reading-meta{flex:1}.reading-label{font-family:'JetBrains Mono',monospace;font-size:7px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent);margin-bottom:2px}.reading-title{font-size:13px;font-weight:600}.reading-author{font-size:11px;color:var(--sub);margin-top:1px}
/* INSIGHTS */
.insight-card{padding:14px;border-radius:12px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);margin-bottom:8px;transition:all .3s;text-decoration:none;display:block;color:var(--text)}.insight-card:hover{background:var(--cardH);border-color:rgba(0,225,255,.12);transform:translateX(4px)}
.insight-text{font-size:13px;line-height:1.6;color:var(--sub)}.insight-text strong{color:var(--text)}.insight-source{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--accent);margin-top:6px;opacity:.6}
/* TIMELINE */
.tl-wrap{position:relative;padding-left:20px;margin:8px 0 12px}.tl-line{position:absolute;left:5px;top:0;bottom:0;width:1px;background:linear-gradient(180deg,var(--accent),var(--accent2),var(--accent3))}
.tl-item{position:relative;padding:8px 0 8px 16px;display:flex;align-items:flex-start;gap:8px}.tl-dot{position:absolute;left:-20px;top:12px;width:10px;height:10px;border-radius:50%;border:2px solid var(--accent);background:var(--bg);z-index:1;transition:all .3s}
.tl-item:hover .tl-dot{background:var(--accent);box-shadow:0 0 12px var(--glowS)}.tl-yr{font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:700;color:var(--accent);min-width:46px;flex-shrink:0}.tl-txt{font-size:12px;color:var(--sub);line-height:1.4}.tl-txt strong{color:var(--text);font-weight:600}
.tl-era .tl-txt{font-size:13px}.tl-era .tl-dot{width:12px;height:12px;left:-21px}
.tl-sub{padding:4px 0 4px 16px}.tl-sub .tl-dot{width:6px;height:6px;left:-18px;top:10px;border-width:1.5px;opacity:.6}.tl-sub .tl-txt{font-size:11px;opacity:.8}
[dir="rtl"] .tl-wrap{padding-left:0;padding-right:20px}[dir="rtl"] .tl-line{left:auto;right:5px}[dir="rtl"] .tl-item{padding-left:0;padding-right:16px}[dir="rtl"] .tl-dot{left:auto;right:-20px}
/* SHARE CARD OVERLAY */
#shareOverlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .4s,visibility .4s;backdrop-filter:blur(10px);pointer-events:none}#shareOverlay.show{opacity:1;visibility:visible;pointer-events:auto}
.share-card-inner{text-align:center}.share-canvas{border-radius:16px;max-width:90vw;box-shadow:0 20px 60px rgba(0,0,0,.5)}
.share-actions{display:flex;gap:12px;justify-content:center;margin-top:16px}
.share-btn{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:1.5px;text-transform:uppercase;padding:10px 20px;border-radius:8px;border:1px solid var(--border);background:var(--card);color:var(--sub);cursor:pointer;transition:all .3s;backdrop-filter:blur(10px)}.share-btn:hover{border-color:var(--accent);color:var(--accent)}
.share-close{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.4;cursor:pointer;margin-top:16px}.share-close:hover{opacity:1;color:var(--accent)}
/* STREAK & SOUND */
.streak{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--accent);opacity:.2;text-align:center;margin-top:4px;transition:opacity .3s}.streak:hover{opacity:.6}
.snd-btn i{font-size:12px}
/* ACHIEVEMENT TOAST */
.toast-container{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:9990;display:flex;flex-direction:column;gap:8px;align-items:center;pointer-events:none}
.toast{display:flex;align-items:center;gap:10px;padding:12px 20px;border-radius:12px;background:var(--bg2);border:1px solid var(--accent);backdrop-filter:blur(20px);box-shadow:0 8px 32px rgba(0,225,255,.2);font-family:'JetBrains Mono',monospace;transform:translateY(60px) scale(.8);opacity:0;transition:all .5s cubic-bezier(.16,1,.3,1);pointer-events:auto;max-width:90vw}
.toast.show{transform:translateY(0) scale(1);opacity:1}
.toast-emoji{font-size:28px;flex-shrink:0}.toast-body{display:flex;flex-direction:column;gap:2px}
.toast-title{font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent);font-weight:700}
.toast-desc{font-size:11px;color:var(--sub)}
.toast-xp{font-size:9px;color:var(--accent3);margin-top:2px;letter-spacing:1px}
/* TROPHY CASE */
#trophyOverlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.9);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .4s,visibility .4s;backdrop-filter:blur(12px);pointer-events:none}
#trophyOverlay.show{opacity:1;visibility:visible;pointer-events:auto}
.trophy-panel{width:90%;max-width:400px;max-height:80vh;overflow-y:auto;padding:28px;border-radius:20px;background:var(--bg2);border:1px solid var(--border);transform:scale(.85);transition:transform .5s cubic-bezier(.16,1,.3,1)}
#trophyOverlay.show .trophy-panel{transform:scale(1)}
.trophy-header{text-align:center;margin-bottom:20px}
.trophy-title{font-family:'JetBrains Mono',monospace;font-size:12px;letter-spacing:2px;text-transform:uppercase;color:var(--accent)}
.trophy-xp-bar{margin:12px 0 8px;height:6px;border-radius:3px;background:var(--border);overflow:hidden;position:relative}
.trophy-xp-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3));transition:width .8s cubic-bezier(.16,1,.3,1)}
.trophy-level{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);text-align:center;letter-spacing:1px}
.trophy-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:16px}
.trophy-badge{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 8px;border-radius:12px;background:var(--card);border:1px solid var(--border);text-align:center;transition:all .3s}
.trophy-badge.unlocked{border-color:rgba(0,225,255,.2);background:rgba(0,225,255,.03)}
.trophy-badge.locked{opacity:.3;filter:grayscale(1)}
.trophy-badge-emoji{font-size:28px;transition:transform .3s}.trophy-badge.unlocked:hover .trophy-badge-emoji{transform:scale(1.2) rotate(10deg)}
.trophy-badge-name{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--text)}
.trophy-badge-desc{font-size:9px;color:var(--sub);line-height:1.3}
.trophy-close{text-align:center;margin-top:16px;font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.4;cursor:pointer}.trophy-close:hover{opacity:1;color:var(--accent)}
/* XP BAR (footer) */
.xp-footer{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:8px;opacity:.2;transition:opacity .3s}.xp-footer:hover{opacity:.6}
.xp-bar-mini{width:80px;height:3px;border-radius:2px;background:var(--border);overflow:hidden}.xp-bar-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .5s}
.xp-text{font-family:'JetBrains Mono',monospace;font-size:8px;color:var(--sub);letter-spacing:1px}
/* TROPHY BUTTON */
.trophy-btn{font-size:12px}
/* LIVE CONSOLE */
.live-console{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--accent);opacity:.25;text-align:center;margin-top:8px;min-height:14px;letter-spacing:.5px;transition:opacity .3s}.live-console:hover{opacity:.6}
.live-console .cursor-blink{animation:cblink 1s step-end infinite}
@keyframes cblink{50%{opacity:0}}
/* SMART CTA */
.smart-cta{position:fixed;bottom:0;left:0;right:0;z-index:100;padding:16px 24px;background:linear-gradient(180deg,transparent,var(--bg) 30%);display:flex;justify-content:center;transform:translateY(100%);transition:transform .6s cubic-bezier(.16,1,.3,1);pointer-events:none}
.smart-cta.show{transform:translateY(0);pointer-events:auto}
.smart-cta-inner{display:flex;align-items:center;gap:10px;padding:12px 20px;border-radius:12px;background:var(--bg2);border:1px solid var(--accent);backdrop-filter:blur(20px);box-shadow:0 -4px 24px rgba(0,225,255,.15);max-width:400px;width:100%;text-decoration:none;color:var(--text);transition:all .3s}
.smart-cta-inner:hover{box-shadow:0 -4px 32px rgba(0,225,255,.3);transform:translateY(-2px)}
.smart-cta-icon{font-size:18px;color:var(--accent)}.smart-cta-text{flex:1}.smart-cta-title{font-size:12px;font-weight:600}.smart-cta-sub{font-size:9px;color:var(--sub);font-family:'JetBrains Mono',monospace;margin-top:2px}
.smart-cta-close{color:var(--sub);cursor:pointer;padding:4px;font-size:12px;opacity:.5;transition:opacity .3s}.smart-cta-close:hover{opacity:1}
/* DAILY CHALLENGE */
.challenge-card{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:10px;background:linear-gradient(135deg,rgba(0,225,255,.03),rgba(99,102,241,.03));border:1px dashed rgba(0,225,255,.15);margin:12px 0 0;transition:all .3s}
.challenge-card.completed{border-style:solid;border-color:rgba(34,197,94,.3);background:rgba(34,197,94,.03)}
.challenge-icon{font-size:18px;flex-shrink:0}.challenge-meta{flex:1}
.challenge-label{font-family:'JetBrains Mono',monospace;font-size:7px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent);margin-bottom:2px}
.challenge-text{font-size:11px;color:var(--sub)}
.challenge-progress{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--accent);flex-shrink:0}
/* PERSONALIZED RECS */
.rec-card{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:10px;background:var(--card);border:1px solid var(--border);margin-top:8px;text-decoration:none;color:var(--text);transition:all .3s}
.rec-card:hover{border-color:rgba(0,225,255,.15);background:var(--cardH);transform:translateX(4px)}
.rec-icon{font-size:16px;color:var(--accent);flex-shrink:0}.rec-meta{flex:1}.rec-label{font-family:'JetBrains Mono',monospace;font-size:7px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent3);margin-bottom:1px}.rec-title{font-size:12px;font-weight:600}
/* CERTIFICATION WALL */
.cert-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:8px 0 12px}
.cert-card{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px 6px;border-radius:12px;background:var(--card);border:1px solid var(--border);backdrop-filter:blur(20px);text-decoration:none;color:var(--text);transition:all .4s;text-align:center;position:relative;overflow:hidden}
.cert-card::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(0,225,255,.04),transparent);opacity:0;transition:opacity .3s}.cert-card:hover::before{opacity:1}
.cert-card:hover{border-color:rgba(0,225,255,.15);transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,225,255,.08)}
.cert-icon{font-size:24px;transition:transform .3s}.cert-card:hover .cert-icon{transform:scale(1.15)}
.cert-name{font-family:'JetBrains Mono',monospace;font-size:7px;letter-spacing:.5px;text-transform:uppercase;line-height:1.3;color:var(--sub)}.cert-name strong{color:var(--text);display:block;font-size:8px;margin-bottom:1px}
.cert-org{font-size:7px;color:var(--accent);opacity:.6;font-family:'JetBrains Mono',monospace;letter-spacing:.5px}
.cert-verify{position:absolute;top:4px;right:4px;width:14px;height:14px;border-radius:50%;background:rgba(34,197,94,.15);display:flex;align-items:center;justify-content:center;font-size:7px;color:#22c55e;opacity:0;transition:opacity .3s}.cert-card:hover .cert-verify{opacity:1}
@media(max-width:380px){.cert-grid{grid-template-columns:repeat(2,1fr)}}
/* VISITOR GLOBE */
.globe-wrap{margin:12px auto;text-align:center;position:relative}
.globe-canvas{border-radius:50%;display:block;margin:0 auto}
.globe-label{font-family:'JetBrains Mono',monospace;font-size:8px;color:var(--sub);opacity:.3;text-align:center;margin-top:6px;letter-spacing:1px}
.globe-count{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--accent);text-align:center;margin-top:2px;opacity:.4}
/* AR CARD */
#arOverlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.92);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .4s,visibility .4s;backdrop-filter:blur(12px);pointer-events:none}
#arOverlay.show{opacity:1;visibility:visible;pointer-events:auto}
.ar-panel{text-align:center;max-width:360px;width:90%;padding:28px;border-radius:20px;background:var(--bg2);border:1px solid var(--border);transform:scale(.85);transition:transform .5s cubic-bezier(.16,1,.3,1)}
#arOverlay.show .ar-panel{transform:scale(1)}
.ar-title{font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:16px}
.ar-qr{width:200px;height:200px;margin:0 auto;border-radius:12px;background:white;padding:12px;display:flex;align-items:center;justify-content:center}
.ar-qr canvas,.ar-qr img{width:100%;height:100%;border-radius:4px}
.ar-hint{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);margin-top:12px;opacity:.5;line-height:1.5}
.ar-actions{display:flex;gap:10px;justify-content:center;margin-top:14px}
.ar-btn{font-family:'JetBrains Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;padding:8px 16px;border-radius:8px;border:1px solid var(--border);background:var(--card);color:var(--sub);cursor:pointer;transition:all .3s}.ar-btn:hover{border-color:var(--accent);color:var(--accent)}
.ar-close{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.4;cursor:pointer;margin-top:14px}.ar-close:hover{opacity:1;color:var(--accent)}
/* MICRO-ANIMATIONS (scroll-triggered) */
.sa{opacity:0;transition:opacity .8s,transform .8s cubic-bezier(.16,1,.3,1)}.sa.vis{opacity:1;transform:none!important}
.sa-up{transform:translateY(30px)}.sa-left{transform:translateX(-30px)}.sa-right{transform:translateX(30px)}.sa-scale{transform:scale(.9)}.sa-rotate{transform:rotate(-3deg) translateY(20px)}
.foot{text-align:center;margin-top:12px;font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.25;transition:opacity .3s}
.foot:hover{opacity:.7}
.visitor-count{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--sub);opacity:.15;text-align:center;margin-top:8px;transition:opacity .3s}
.visitor-count:hover{opacity:.5}
</style>
</head>
<body>
<div class="noise"></div>
<div class="sbar" id="sbar"></div>
<div class="cg" id="cg"></div>
<div class="cd" id="cdd"></div>
<div class="mesh"><div class="b1"></div><div class="b2"></div><div class="b3"></div></div>
<canvas id="bgC" aria-hidden="true"></canvas>

<div class="top-btns">
    <button class="tbtn trophy-btn" id="trophyBtn" aria-label="Trophy case" style="display:none"><i class="fa-solid fa-trophy"></i></button>
    <button class="tbtn snd-btn" id="sndBtn" aria-label="Toggle ambient sound" style="display:none"><i class="fa-solid fa-volume-xmark" id="sndIcon"></i></button>
    <button class="tbtn lang-btn" id="langBtn" aria-label="Toggle Arabic/English">EN</button>
    <button class="tbtn" id="tbtn" aria-label="Toggle theme"><i class="fa-solid fa-moon" id="ticon"></i></button>
</div>

<div id="easterEgg" onclick="if(event.target===this)closeEgg()">
    <div class="egg-card">
        <div class="egg-emoji">ü§´</div>
        <div class="egg-title">You found a secret!</div>
        <div class="egg-text" id="eggText">
            Fun facts: I once debugged a production banking system at 3 AM in my pajamas. My first "app" was an Excel macro that automated my entire department's reporting. I believe the best code is the code you delete. Also ‚Äî I make really good koshari. üç≤
        </div>
        <div class="egg-close" onclick="closeEgg()">[ PRESS ESC OR TAP TO CLOSE ]</div>
    </div>
</div>

<div id="shareOverlay" onclick="if(event.target===this)closeShare()"><div class="share-card-inner"><canvas id="shareCanvas" class="share-canvas" width="600" height="340"></canvas><div class="share-actions"><button class="share-btn" onclick="downloadShareCard()"><i class="fa-solid fa-download" style="margin-right:4px"></i> Save Image</button><button class="share-btn" onclick="copyShareLink()"><i class="fa-solid fa-link" style="margin-right:4px"></i> Copy Link</button></div><div class="share-close" onclick="closeShare()">[ TAP TO CLOSE ]</div></div></div>

<!-- AR Business Card Overlay -->
<div id="arOverlay" onclick="if(event.target===this)closeAr()"><div class="ar-panel"><div class="ar-title">üì± AR Business Card</div><div class="ar-qr" id="arQr"></div><div class="ar-hint">Scan with your phone camera<br>to save Amr's contact card instantly</div><div class="ar-actions"><button class="ar-btn" onclick="downloadArQr()"><i class="fa-solid fa-download" style="margin-right:4px"></i>Save QR</button><button class="ar-btn" onclick="shareArCard()"><i class="fa-solid fa-share" style="margin-right:4px"></i>Share</button></div><div class="ar-close" onclick="closeAr()">[ TAP TO CLOSE ]</div></div></div>
<!-- Trophy Case Overlay -->
<div id="trophyOverlay" onclick="if(event.target===this)closeTrophy()"><div class="trophy-panel"><div class="trophy-header"><div class="trophy-title">üèÜ Trophy Case</div><div class="trophy-xp-bar"><div class="trophy-xp-fill" id="trophyXpFill" style="width:0%"></div></div><div class="trophy-level" id="trophyLevel">Level 1 ¬∑ 0 XP</div></div><div class="trophy-grid" id="trophyGrid"></div><div class="trophy-close" onclick="closeTrophy()">[ PRESS T OR TAP TO CLOSE ]</div></div></div>
<!-- Toast Notifications -->
<div class="toast-container" id="toastContainer"></div>
<!-- Smart CTA -->
<div class="smart-cta" id="smartCta"><a class="smart-cta-inner" id="smartCtaLink" href="#" target="_blank" rel="noopener"><div class="smart-cta-icon" id="smartCtaIcon"><i class="fa-solid fa-comments"></i></div><div class="smart-cta-text"><div class="smart-cta-title" id="smartCtaTitle"></div><div class="smart-cta-sub" id="smartCtaSub"></div></div><div class="smart-cta-close" onclick="event.preventDefault();event.stopPropagation();dismissSmartCta()"><i class="fa-solid fa-xmark"></i></div></a></div>

<div id="preloader" role="status" aria-label="Loading">
    <div class="pre-line" id="preLine">ESTABLISHING CONNECTION</div>
    <div class="pre-ctr" id="preCtr">0</div>
    <div class="pre-bar" id="preBar"><div class="pre-fill" id="preFill"></div></div>
    <div class="pre-stage" id="preStg"></div>
</div>

<div id="app">
    <div class="rv" style="display:flex;justify-content:center;">
        <div class="st"><span class="sd" id="sdot" style="background:#22c55e;" aria-hidden="true"></span><span id="stxt">LOCATING...</span></div>
    </div>
    <div class="pf rv" id="pfw" role="button" tabindex="0" aria-label="Flip to show QR code" onclick="toggleFlip()" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleFlip();}">
        <svg viewBox="0 0 136 136" aria-hidden="true"><circle cx="68" cy="68" r="66" stroke="var(--accent)" opacity=".3"/><circle cx="68" cy="68" r="66" stroke="var(--accent2)" opacity=".2" stroke-dasharray="4 10" style="animation-direction:reverse;animation-duration:18s"/></svg>
        <div class="pfi"><div class="fc"><div class="fi" id="fc">
            <div class="ff"><img src="profile.jpg" alt="Amr Elharony" onerror="this.style.display='none';this.nextElementSibling.style.display='flex';"><div style="width:100%;height:100%;background:var(--bg2);display:none;align-items:center;justify-content:center;"><i class="fa-solid fa-user" style="font-size:36px;color:var(--sub);" aria-hidden="true"></i></div></div>
            <div class="fb"><img id="qri" src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://amrelharony.com&color=00e1ff&bgcolor=06080f" alt="QR code" style="width:80%;height:80%;object-fit:contain;"></div>
        </div></div></div>
        <div class="qb" aria-hidden="true"><i class="fa-solid fa-qrcode"></i></div>
    </div>
    <div class="ph rv">TAP PHOTO FOR QR</div>

    <h1 class="hn rv"><span class="ng" id="hname">Amr Elharony</span></h1>
    <p class="vp rv" id="vpText">I help <strong>banks and FinTech teams</strong> ship digital products faster through <strong>agile delivery, data-driven decisions</strong>, and bridging the gap between business and technology.</p>
    <div class="rl rv" id="rtags"><span class="rt" data-ar="ŸÇÿßÿ¶ÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ">Delivery Lead</span><span class="rt" data-ar="ŸÖŸèÿ±ÿ¥ÿØ">Mentor</span><span class="rt" data-ar="ŸÖÿ§ŸÑŸÅ ŸàŸÖÿ™ÿ≠ÿØÿ´ ŸÅŸäŸÜÿ™ŸÉ">Fintech Author & Speaker</span></div>

    <div class="imp rv" aria-label="Key achievements">
        <div class="imp-item"><div class="imp-num" id="impNum1">9+</div><div class="imp-label" id="impL1">Years in Banking</div></div>
        <div class="imp-item"><div class="imp-num" id="impNum2">1,000+</div><div class="imp-label" id="impL2">Mentoring Mins</div></div>
        <div class="imp-item"><div class="imp-num" id="impNum3">7+</div><div class="imp-label" id="impL3">Panel Stages</div></div>
    </div>


    <div class="ticker-wrap rv" aria-label="Recommendations">
        <div class="ticker" id="ticker"></div>
    </div>

    <div class="conf-strip rv">
        <span class="conf-badge">Seamless North Africa</span>
        <span class="conf-badge">Africa FinTech Forum</span>
        <span class="conf-badge">DevOpsDays Cairo</span>
        <span class="conf-badge">Techne Summit</span>
        <span class="conf-badge">Banking & Fintech Summit</span>
        <span class="conf-badge">Egypt Career Summit</span>
        <span class="conf-badge">TechUp Women</span>
    </div>

    <div class="avail rv"><i class="fa-solid fa-circle"></i> <span id="availTxt">Checking...</span></div>

    <a href="https://calendly.com/amrmelharony/30min" target="_blank" rel="noopener" class="vcb rv" id="calBtn">
        <div class="vcb-shim"></div>
        <i class="fa-solid fa-calendar-check" aria-hidden="true"></i>
        <span>Book a 30-Min Call</span>
    </a>
    <div class="shake-hint" id="shakeHint"><i class="fa-solid fa-mobile-screen-button" aria-hidden="true" style="margin-right:4px;"></i> Met me in person? Shake your phone</div>
    <div class="shake-bar" id="shakeBar"><div class="shake-fill" id="shakeFill"></div></div>
    <div class="desk-hint" id="deskHint"><i class="fa-solid fa-keyboard" aria-hidden="true" style="margin-right:4px;"></i> Met me? Press <strong style="color:var(--accent);">S</strong> to save my contact</div>
    <div id="contactSecret">
        <div class="sr" id="srow">
            <a href="https://www.linkedin.com/in/amrmelharony" target="_blank" rel="noopener" class="si" data-c="#0077b5" aria-label="LinkedIn"><i class="fa-brands fa-linkedin" aria-hidden="true"></i></a>
            <a href="https://api.whatsapp.com/send?phone=201114260806" target="_blank" rel="noopener" class="si" data-c="#25d366" aria-label="WhatsApp"><i class="fa-brands fa-whatsapp" aria-hidden="true"></i></a>
            <a href="https://t.me/Amrmelharony" target="_blank" rel="noopener" class="si" data-c="#0088cc" aria-label="Telegram"><i class="fa-brands fa-telegram" aria-hidden="true"></i></a>
            <a href="mailto:a.elharony@gmail.com" class="si" data-c="#ea4335" aria-label="Email"><i class="fa-solid fa-envelope" aria-hidden="true"></i></a>
        </div>
        <button class="vcb" id="vcBtn" onclick="downloadVCard()"><div class="vcb-shim"></div><i class="fa-solid fa-address-card" aria-hidden="true"></i><span id="vcTxt">Save Contact</span></button>
    </div>

    <div class="qp-wrap rv">
        <a class="qp" href="https://calendly.com/amrmelharony/30min" target="_blank" rel="noopener"><i class="fa-solid fa-bolt" style="margin-right:4px;color:var(--accent);"></i>Ask about Agile</a>
        <a class="qp" href="https://www.linkedin.com/in/amrmelharony" target="_blank" rel="noopener"><i class="fa-solid fa-coins" style="margin-right:4px;color:var(--accent2);"></i>Ask about FinTech</a>
        <a class="qp" href="https://bilingualexecutive.amrelharony.com/" target="_blank" rel="noopener"><i class="fa-solid fa-book" style="margin-right:4px;color:var(--accent3);"></i>About My Book</a>
        <a class="qp" href="https://adplist.org/mentors/amr-elharony" target="_blank" rel="noopener"><i class="fa-solid fa-graduation-cap" style="margin-right:4px;color:#eab308;"></i>Get Mentored</a>
    </div>

    <div style="display:flex;flex-direction:column;gap:12px;">
        <a href="https://bilingualexecutive.amrelharony.com/" target="_blank" rel="noopener" class="lk rv"><div class="ls"></div><div class="lm"></div><div class="li"><img src="be.png" alt="" onerror="this.style.display='none';this.nextElementSibling.style.display='block';"><i class="fa-solid fa-book fbi" style="color:var(--accent);" aria-hidden="true"></i></div><div class="lb"><div class="lt">The Bilingual Executive</div><div class="lsu">My Book</div></div><div class="la" aria-hidden="true"><i class="fa-solid fa-arrow-right"></i></div></a>
        <a href="https://www.linkedin.com/company/fintech-bilinguals" target="_blank" rel="noopener" class="lk rv"><div class="ls"></div><div class="lm"></div><div class="li"><img src="fb.png" alt="" onerror="this.style.display='none';this.nextElementSibling.style.display='block';"><i class="fa-solid fa-users fbi" style="color:var(--accent2);" aria-hidden="true"></i></div><div class="lb"><div class="lt">Fintech Bilinguals</div><div class="lsu">Join the Community</div></div><div class="la" aria-hidden="true"><i class="fa-solid fa-arrow-right"></i></div></a>
        <a href="https://adplist.org/mentors/amr-elharony" target="_blank" rel="noopener" class="lk rv"><div class="ls"></div><div class="lm"></div><div class="li"><img src="smiley.jpg" style="border-radius:8px;" alt="" onerror="this.style.display='none';this.nextElementSibling.style.display='block';"><i class="fa-solid fa-graduation-cap fbi" style="color:var(--accent3);" aria-hidden="true"></i></div><div class="lb"><div class="lt">Get Mentored</div><div class="lsu">Free 1:1 Agile Coaching</div></div><div class="la" aria-hidden="true"><i class="fa-solid fa-arrow-right"></i></div></a>
    </div>

    <div class="nd rv"><div class="ndl"></div><div class="ndt">THE JOURNEY</div><div class="ndl"></div></div>
    <div class="tl-wrap rv"><div class="tl-line"></div>
        <div class="tl-item tl-era"><div class="tl-dot" style="border-color:var(--accent);"></div><div class="tl-yr">2026</div><div class="tl-txt"><strong>Author, Founder & Data Leader</strong></div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Data & Agile Leader ‚Äî Navigating data delivery as a Scrum Master at Banque Misr</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Published <strong>"The Bilingual Executive"</strong> (print & AI audiobook), launched at the Greek Campus</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Founded <strong>"Fintech Bilinguals"</strong> community in Cairo</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Certified Data Management Professional (CDMP)</div></div>

        <div class="tl-item tl-era"><div class="tl-dot" style="border-color:var(--accent2);"></div><div class="tl-yr">2025</div><div class="tl-txt"><strong>Agile Mastery & Industry Voice</strong></div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Championed hybrid Scrum/Kanban framework for data analytics at Banque Misr</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Earned <strong>SAFe¬Æ 6 SM, PSM II, PSPO II, PSK I, PMI-ACP, ICAgile-ATF</strong>, Jira Cloud Management</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Panels & keynotes at <strong>Techne Summit, DevOpsDays Cairo, Africa FinTech Forum</strong></div></div>

        <div class="tl-item tl-era"><div class="tl-dot" style="border-color:var(--accent3);"></div><div class="tl-yr">2023‚Äì24</div><div class="tl-txt"><strong>Doctorate & The Data Pivot</strong></div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Earned <strong>Doctorate (DBA)</strong> in Digital Transformation ‚Äî Helwan University</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Pivoted to Corporate Banking Data Analyst at Banque Misr + Datacamp Pro certification</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt"><strong>1,000+ coaching minutes</strong> as ADPList Top Mentor ¬∑ Won Banque Misr "Best Learner Award"</div></div>

        <div class="tl-item tl-era"><div class="tl-dot" style="border-color:#eab308;"></div><div class="tl-yr">2019‚Äì22</div><div class="tl-txt"><strong>Project Management & FinTech Foundations</strong></div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Managed complex banking projects at Banque Misr ¬∑ Earned <strong>PMP</strong> (Sep 2022)</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">Certified Expert in Digital Finance ‚Äî Frankfurt School of Finance & Management</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt"><strong>MBA in Entrepreneurship</strong> (2019) ¬∑ Pro bono consulting for Egyptian FinTech Association</div></div>

        <div class="tl-item tl-era"><div class="tl-dot" style="border-color:#22c55e;"></div><div class="tl-yr">2014‚Äì16</div><div class="tl-txt"><strong>Security & Economic Roots</strong></div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt">IT Officer ‚Äî Egyptian Armed Forces, commanding digital security operations (2015‚Äì2016)</div></div>
        <div class="tl-item tl-sub"><div class="tl-dot"></div><div class="tl-txt"><strong>BA in International Economics</strong> ‚Äî Helwan University (2014) ¬∑ Internships at Central Bank of Egypt, EGX, Nissan</div></div>
    </div>

    <!-- Certification Wall -->
    <div class="nd rv"><div class="ndl"></div><div class="ndt">CERTIFICATIONS</div><div class="ndl"></div></div>
    <div class="cert-grid" id="certGrid">
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üéØ</div><div class="cert-name"><strong>PMP</strong>Project Management</div><div class="cert-org">PMI ¬∑ 2022</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üîÑ</div><div class="cert-name"><strong>SAFe¬Æ 6 SM</strong>Scrum Master</div><div class="cert-org">Scaled Agile ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üìã</div><div class="cert-name"><strong>PSM II</strong>Pro Scrum Master</div><div class="cert-org">Scrum.org ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üì¶</div><div class="cert-name"><strong>PSPO II</strong>Product Owner</div><div class="cert-org">Scrum.org ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üìä</div><div class="cert-name"><strong>PMI-ACP</strong>Agile Certified</div><div class="cert-org">PMI ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üß†</div><div class="cert-name"><strong>PSK I</strong>Scrum + Kanban</div><div class="cert-org">Scrum.org ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üèóÔ∏è</div><div class="cert-name"><strong>ICAgile ATF</strong>Agile Team Facilit.</div><div class="cert-org">ICAgile ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üíæ</div><div class="cert-name"><strong>CDMP</strong>Data Management</div><div class="cert-org">DAMA ¬∑ 2026</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üè¶</div><div class="cert-name"><strong>CEDF</strong>Digital Finance</div><div class="cert-org">Frankfurt School ¬∑ 2019</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üìà</div><div class="cert-name"><strong>Datacamp Pro</strong>Data Analyst</div><div class="cert-org">Datacamp ¬∑ 2023</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">‚öôÔ∏è</div><div class="cert-name"><strong>Jira Cloud</strong>Management</div><div class="cert-org">Atlassian ¬∑ 2025</div></a>
        <a href="https://www.credly.com/users/amr-elharony" target="_blank" rel="noopener" class="cert-card sa sa-scale"><div class="cert-verify"><i class="fa-solid fa-check"></i></div><div class="cert-icon">üéì</div><div class="cert-name"><strong>DBA</strong>Digital Transform.</div><div class="cert-org">Helwan Univ. ¬∑ 2023</div></a>
    </div>

    <!-- Visitor Globe -->
    <div class="globe-wrap rv" id="globeWrap">
        <canvas id="globeCanvas" class="globe-canvas" width="180" height="180"></canvas>
        <div class="globe-label">VISITORS WORLDWIDE</div>
        <div class="globe-count" id="globeCount"></div>
    </div>

    <div class="nd rv"><div class="ndl"></div><div class="ndt">LATEST ARTICLES</div><div class="ndl"></div></div>
    <div id="linkedinFeed" style="display:flex;flex-direction:column;gap:8px;">
        <div class="nl rv" style="opacity:.3;pointer-events:none;">
            <div class="ni"><i class="fa-solid fa-spinner fa-spin" style="color:var(--accent);"></i></div>
            <span class="nlb">Loading latest posts...</span>
        </div>
    </div>

    <!-- Daily Challenge -->
    <div class="challenge-card rv" id="dailyChallenge"><div class="challenge-icon" id="challengeIcon">üéØ</div><div class="challenge-meta"><div class="challenge-label">Daily Challenge</div><div class="challenge-text" id="challengeText">Loading...</div></div><div class="challenge-progress" id="challengeProgress"></div></div>

    <!-- Personalized Recommendation -->
    <div id="recContainer"></div>

    <button class="vcb rv" style="background:var(--card);color:var(--text);border:1px solid var(--border);margin-top:16px;" onclick="openShare()"><i class="fa-solid fa-share-nodes" aria-hidden="true"></i><span>Share My Profile</span></button>
    <button class="vcb rv" style="background:var(--card);color:var(--text);border:1px solid var(--border);margin-top:8px;margin-bottom:24px;" onclick="openAr()"><i class="fa-solid fa-qrcode" aria-hidden="true"></i><span>AR Business Card</span></button>

    <div class="visitor-count" id="visitorCount"></div>
    <div class="streak" id="streakCount"></div>
    <div class="xp-footer" id="xpFooter"><span class="xp-text" id="xpText">0 XP</span><div class="xp-bar-mini"><div class="xp-bar-fill" id="xpBarFill" style="width:0%"></div></div><span class="xp-text" id="xpLevel">LVL 1</span></div>
    <div class="live-console" id="liveConsole"><span class="cursor-blink">‚ñä</span></div>
    <div class="foot">&copy; <span id="yr"></span> Amr Elharony</div>
</div>

<script>
(()=>{
'use strict';
document.getElementById('yr').textContent=new Date().getFullYear();
const D=window.matchMedia('(pointer:fine)').matches;
const reducedMotion=window.matchMedia('(prefers-reduced-motion:reduce)').matches;
const isRepeatVisit=!!localStorage.getItem('visited');localStorage.setItem('visited','1');
const isMobile=window.matchMedia('(pointer:coarse)').matches;
const params=new URLSearchParams(location.search);

// ‚ïê‚ïê‚ïê SMART GREETING (referrer detection) ‚ïê‚ïê‚ïê
const refMap={linkedin:'WELCOME FROM LINKEDIN',calendly:'EXCITED FOR OUR CALL',seamless:'GREAT SEEING YOU AT SEAMLESS',devopsdays:'HELLO FROM DEVOPSDAYS',techne:'WELCOME FROM TECHNE SUMMIT',afff:'HELLO FROM AFRICA FINTECH FORUM',career180:'WELCOME FROM CAREER SUMMIT',adplist:'WELCOME, FELLOW MENTOR'};
const refKey=params.get('ref');
let customGreeting=refKey&&refMap[refKey.toLowerCase()]?refMap[refKey.toLowerCase()]:null;

// ‚ïê‚ïê‚ïê SOCIAL PROOF TICKER ‚ïê‚ïê‚ïê
const quotes=[
    {q:"A strategic catalyst for change",a:"Ayman Hassan Soliman",r:"Sr. Deputy GM, Banque Misr"},
    {q:"He combines strategic vision with relentless focus on execution",a:"Omar Mohey",r:"Senior Data Steward"},
    {q:"His deep understanding of Agile and data makes him a role model",a:"Alaa Ghaly",r:"Asst. Manager, Banque Misr"},
    {q:"A rare talent who challenges, teaches and leads to drive change",a:"Sameh Elebiary",r:"Credit Analyst, Banque Misr"},
    {q:"Amr is the complete package ‚Äî business acumen and technology skills",a:"Dina Tony",r:"Sr. Corporate RM, Banque Misr"},
    {q:"His EQ is off the charts ‚Äî infectious positive energy",a:"Walid Gafeer",r:"Sr. RM, Banque Misr"},
    {q:"His coaching mastery comes naturally, full of hope and radiate energy",a:"Amr Hussien",r:"Deputy GM, Banque Misr"},
    {q:"He masterfully leverages technology to engineer fundamental shifts",a:"Ayman Hassan",r:"Sr. Deputy GM, Banque Misr"},
    {q:"A tech-savvy banking professional with innovative problem-solving",a:"Haitham Adel",r:"Deputy GM, Banque Misr"},
    {q:"Wikipedia moving on Earth ‚Äî wide knowledge in multidisciplinary topics",a:"Mohamed Abaza",r:"Lead Data Scientist"},
    {q:"His deep tech expertise and emotional intelligence set him apart",a:"Eslam Youssef",r:"Sr. Data Analyst"},
    {q:"He is a true visionary and driving force",a:"Maha Mohamed",r:"Officer, Banque Misr"}
];
function buildTicker(){
    const t=document.getElementById('ticker');
    const html=quotes.map(q=>`<div class="tq">"${q.q}" ‚Äî <strong>${q.a}</strong>, ${q.r}</div>`).join('');
    t.innerHTML=html+html; // duplicate for seamless loop
}
buildTicker();

// ‚ïê‚ïê‚ïê PARTICLES ‚ïê‚ïê‚ïê
const cv=document.getElementById('bgC'),cx=cv.getContext('2d');
let W,H,pts=[],mouse={x:-9999,y:-9999},gy={x:0,y:0};
const PC=D?90:45,CD=140,MR=200;let pC={r:0,g:225,b:255};
class Pt{constructor(){this.x=Math.random()*W;this.y=Math.random()*H;this.vx=(Math.random()-.5)*.4;this.vy=(Math.random()-.5)*.4;this.r=Math.random()*1.2+.4;this.ph=Math.random()*6.28;}
update(){this.ph+=.015;this.cr=this.r+Math.sin(this.ph)*.25;this.x+=this.vx+gy.x*.04;this.y+=this.vy+gy.y*.04;if(this.x<-10)this.x=W+10;if(this.x>W+10)this.x=-10;if(this.y<-10)this.y=H+10;if(this.y>H+10)this.y=-10;const dx=mouse.x-this.x,dy=mouse.y-this.y,d=Math.sqrt(dx*dx+dy*dy);if(d<MR&&d>0){const f=(MR-d)/MR;this.x-=(dx/d)*f*2.5;this.y-=(dy/d)*f*2.5;}}
draw(){const{r,g,b}=pC;cx.beginPath();cx.arc(this.x,this.y,this.cr,0,6.28);cx.fillStyle=`rgba(${r},${g},${b},.4)`;cx.fill();cx.beginPath();cx.arc(this.x,this.y,this.cr*3,0,6.28);cx.fillStyle=`rgba(${r},${g},${b},.04)`;cx.fill();}}
function initP(){pts=[];for(let i=0;i<PC;i++)pts.push(new Pt());}
function drawP(){cx.clearRect(0,0,W,H);const{r,g,b}=pC;for(let i=0;i<pts.length;i++){const a=pts[i];a.update();a.draw();for(let j=i+1;j<pts.length;j++){const bb=pts[j],dx=a.x-bb.x,dy=a.y-bb.y,dd=dx*dx+dy*dy;if(dd<CD*CD){const al=(1-Math.sqrt(dd)/CD)*.12;cx.beginPath();cx.strokeStyle=`rgba(${r},${g},${b},${al})`;cx.lineWidth=.5;cx.moveTo(a.x,a.y);cx.lineTo(bb.x,bb.y);cx.stroke();}}}requestAnimationFrame(drawP);}
function rsz(){W=cv.width=innerWidth;H=cv.height=innerHeight;if(!pts.length)initP();}
addEventListener('resize',rsz);rsz();
if(reducedMotion){}else if('requestIdleCallback' in window){requestIdleCallback(()=>{initP();drawP();});}else{setTimeout(()=>{initP();drawP();},100);}
addEventListener('mousemove',e=>{mouse.x=e.clientX;mouse.y=e.clientY;});
addEventListener('touchmove',e=>{if(e.touches[0]){mouse.x=e.touches[0].clientX;mouse.y=e.touches[0].clientY;}},{passive:true});
addEventListener('touchend',()=>{mouse.x=-9999;mouse.y=-9999;});
if(typeof DeviceOrientationEvent!=='undefined'){if(typeof DeviceOrientationEvent.requestPermission==='function'){document.body.addEventListener('touchstart',function g(){DeviceOrientationEvent.requestPermission().then(r=>{if(r==='granted')addEventListener('deviceorientation',oG);}).catch(()=>{});document.body.removeEventListener('touchstart',g);},{once:true});}else addEventListener('deviceorientation',oG);}
function oG(e){if(e.gamma!=null)gy.x=e.gamma;if(e.beta!=null)gy.y=e.beta;}

// ‚ïê‚ïê‚ïê CURSOR ‚ïê‚ïê‚ïê
if(D&&!reducedMotion){const dot=document.getElementById('cdd'),glo=document.getElementById('cg');let gx=0,gy2=0;
document.addEventListener('mousemove',e=>{dot.style.left=e.clientX+'px';dot.style.top=e.clientY+'px';glo.classList.add('on');});
(function ag(){gx+=(mouse.x-gx)*.08;gy2+=(mouse.y-gy2)*.08;glo.style.left=gx+'px';glo.style.top=gy2+'px';requestAnimationFrame(ag);})();
const hs='a,button,.pf,.lk,.nl';document.addEventListener('mouseover',e=>{if(e.target.closest(hs))dot.classList.add('hov');});document.addEventListener('mouseout',e=>{if(e.target.closest(hs))dot.classList.remove('hov');});
document.querySelectorAll('.lk').forEach(card=>{const sp=card.querySelector('.ls');let cxx=0,cyy=0,tx=0,ty=0;
card.addEventListener('mousemove',e=>{const r=card.getBoundingClientRect(),x=e.clientX-r.left,y=e.clientY-r.top;if(sp)sp.style.background=`radial-gradient(250px circle at ${x}px ${y}px,var(--glow),transparent 70%)`;tx=((y-r.height/2)/(r.height/2))*-6;ty=((x-r.width/2)/(r.width/2))*6;});
card.addEventListener('mouseleave',()=>{tx=0;ty=0;});(function spr(){cxx+=(tx-cxx)*.12;cyy+=(ty-cyy)*.12;if(Math.abs(tx-cxx)>.01||Math.abs(ty-cyy)>.01||tx!==0)card.style.transform=`perspective(800px) rotateX(${cxx}deg) rotateY(${cyy}deg) scale3d(1.01,1.01,1.01)`;else card.style.transform='';requestAnimationFrame(spr);})();});}

// ‚ïê‚ïê‚ïê THEME ‚ïê‚ïê‚ïê
function applyTheme(m){const i=document.getElementById('ticon'),l=m==='light';document.body.classList.toggle('light-mode',l);i.className=l?'fa-solid fa-moon':'fa-solid fa-sun';pC=l?{r:15,g:23,b:42}:{r:0,g:225,b:255};const q=document.getElementById('qri');if(q){const fg=l?'0066ff':'00e1ff',bg=l?'f4f6fb':'06080f';q.src=`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://amrelharony.com&color=${fg}&bgcolor=${bg}`;}}
const sv=localStorage.getItem('theme'),hr=new Date().getHours();applyTheme(sv||(hr>=6&&hr<18?'light':'dark'));
document.getElementById('tbtn').addEventListener('click',()=>{const n=document.body.classList.contains('light-mode')?'dark':'light';localStorage.setItem('theme',n);applyTheme(n);});

// ‚ïê‚ïê‚ïê FLIP ‚ïê‚ïê‚ïê
window.toggleFlip=()=>document.getElementById('fc').classList.toggle('flipped');

// ‚ïê‚ïê‚ïê STATUS (with smart greeting) ‚ïê‚ïê‚ïê
function updStatus(){
    const h=parseInt(new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",hour12:false}));
    const dot=document.getElementById('sdot'),txt=document.getElementById('stxt');
    let msg,col;
    if(customGreeting){msg=customGreeting;col="#00e1ff";}
    else if(h>=9&&h<17){msg="CAIRO ¬∑ BUILDING FINTECH";col="#22c55e";}
    else if(h>=17&&h<23){msg="CAIRO ¬∑ MENTORING";col="#a855f7";}
    else{msg="CAIRO ¬∑ RECHARGING";col="#f97316";}
    dot.style.background=col;
    if(reducedMotion){txt.textContent=msg;return;}
    txt.textContent='';let i=0;(function t(){if(i<msg.length){txt.textContent+=msg[i];i++;setTimeout(t,35);}})();
}

// ‚ïê‚ïê‚ïê LIVE MENTORING COUNTER ‚ïê‚ïê‚ïê
// Base: 1000 mins as of Oct 2023. ~80 mins/month estimated growth.
function getMentoringMins(){const base=1000,startDate=new Date('2023-10-01'),now=new Date(),months=(now.getFullYear()-startDate.getFullYear())*12+(now.getMonth()-startDate.getMonth());return base+Math.floor(months*80);}
function animateCounter(el,target){if(reducedMotion){el.textContent=target.toLocaleString()+'+';return;}let curr=0;const dur=1500,step=Math.ceil(target/60);const iv=setInterval(()=>{curr=Math.min(curr+step,target);el.textContent=curr.toLocaleString()+'+';if(curr>=target)clearInterval(iv);},dur/60);}

// ‚ïê‚ïê‚ïê TEXT SCRAMBLE ‚ïê‚ïê‚ïê
class Scr{constructor(el){this.el=el;this.ch='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';}
run(text){if(reducedMotion){this.el.innerHTML=`<span class="ng">${text}</span>`;return;}const q=[];for(let i=0;i<text.length;i++)q.push({to:text[i],start:Math.floor(Math.random()*15),end:Math.floor(Math.random()*15)+15+i*2,c:null});let f=0;const u=()=>{let o='',done=0;for(let i=0;i<q.length;i++){const x=q[i];if(f>=x.end){o+=x.to;done++;}else if(f>=x.start){if(!x.c||Math.random()<.3)x.c=this.ch[Math.floor(Math.random()*this.ch.length)];o+=`<span class="sg">${x.c}</span>`;}else o+='';}this.el.innerHTML=o;if(done<q.length){f++;requestAnimationFrame(u);}else this.el.innerHTML=`<span class="ng">${text}</span>`;};u();}}

// ‚ïê‚ïê‚ïê PRELOADER ‚ïê‚ïê‚ïê
const stages=['RESOLVING DNS','ESTABLISHING TLS','LOADING MODULES','DECRYPTING PAYLOAD','RENDERING INTERFACE','READY'];
const SPEED=isRepeatVisit?8:4;
gsap.to('#preLine',{opacity:1,duration:.3,delay:.1});gsap.to('#preCtr',{opacity:1,duration:.3,delay:.2});gsap.to('#preBar',{opacity:1,duration:.3,delay:.3});gsap.to('#preStg',{opacity:1,duration:.3,delay:.35});
let prog=0;const li=setInterval(()=>{prog=Math.min(100,prog+Math.random()*SPEED+1.5);const p=Math.round(prog);document.getElementById('preCtr').textContent=p;document.getElementById('preFill').style.width=p+'%';document.getElementById('preStg').textContent=stages[Math.min(stages.length-1,Math.floor(p/100*stages.length))];if(p>=100){clearInterval(li);setTimeout(launch,isRepeatVisit?100:300);}},isRepeatVisit?20:30);

function done(el){el.classList.remove('rv');el.style.opacity='';el.style.transform='';gsap.set(el,{clearProps:'all'});el.style.opacity='1';el.style.transform='none';}
function launch(){
    const pre=document.getElementById('preloader'),app=document.getElementById('app');
    gsap.to('#preCtr',{scale:1.3,opacity:0,duration:.3,ease:'power2.in'});gsap.to(['#preLine','#preBar','#preStg'],{opacity:0,duration:.2});
    pre.style.clipPath='inset(0 0 0% 0)';gsap.to(pre,{clipPath:'inset(0 0 100% 0)',duration:.9,delay:.3,ease:'power4.inOut',onComplete:()=>{pre.style.display='none';document.body.style.overflow='auto';document.body.style.overflowX='hidden';}});
    gsap.to(app,{opacity:1,duration:.5,delay:.6});setTimeout(updStatus,800);
    document.querySelectorAll('.rv').forEach((el,i)=>{gsap.to(el,{opacity:1,y:0,duration:.9,delay:.8+i*.08,ease:'power3.out',onComplete:()=>done(el)});});
    setTimeout(()=>new Scr(document.getElementById('hname')).run(isArabic?'ÿπŸÖÿ±Ÿà ÿßŸÑÿ≠ÿßÿ±ŸàŸÜŸä':'Amr Elharony'),1400);
    document.querySelectorAll('.rt').forEach((t,i)=>{gsap.from(t,{scale:.7,opacity:0,y:10,duration:.5,delay:1.1+i*.1,ease:'back.out(2)',onComplete:()=>{gsap.set(t,{clearProps:'all'});t.style.opacity='1';}});});
    document.querySelectorAll('.lk').forEach((c,i)=>{gsap.fromTo(c,{opacity:0,y:50,scale:.92,rotateX:10,filter:'blur(6px)'},{opacity:1,y:0,scale:1,rotateX:0,filter:'blur(0px)',duration:.8,delay:1.4+i*.12,ease:'power3.out',onComplete:()=>done(c)});});
    document.querySelectorAll('.nl').forEach((c,i)=>{gsap.fromTo(c,{opacity:0,x:-20},{opacity:1,x:0,duration:.6,delay:2+i*.1,ease:'power2.out',onComplete:()=>done(c)});});
    // Animate mentoring counter
    setTimeout(()=>animateCounter(document.getElementById('impNum2'),getMentoringMins()),1200);
    // Timeline stagger
    document.querySelectorAll('.tl-item').forEach((t,i)=>{gsap.fromTo(t,{opacity:0,x:-15},{opacity:1,x:0,duration:.5,delay:2.2+i*.12,ease:'power2.out'});});
}

// ‚ïê‚ïê‚ïê PROXIMITY-GATED CONTACT ‚ïê‚ïê‚ïê
let contactRevealed=false,isNearby=false;
function revealContact(){
    if(contactRevealed)return;contactRevealed=true;
    const secret=document.getElementById('contactSecret'),hint=document.getElementById('shakeHint'),deskHint=document.getElementById('deskHint'),bar=document.getElementById('shakeBar');
    secret.classList.add('revealed');if(hint){hint.classList.remove('shaking');hint.classList.add('unlocked');hint.innerHTML='<i class="fa-solid fa-lock-open" style="margin-right:4px;"></i> UNLOCKED';}if(bar)bar.classList.remove('active');
    secret.querySelectorAll('.si').forEach(el=>{const c=el.dataset.c;el.addEventListener('mouseenter',()=>el.style.color=c);el.addEventListener('mouseleave',()=>el.style.color='');});
    secret.querySelectorAll('.si').forEach((s,i)=>{gsap.from(s,{scale:0,rotation:90,duration:.5,delay:i*.08,ease:'back.out(3)',onComplete:()=>{gsap.set(s,{clearProps:'all'});s.style.opacity='1';}});});
    if(D&&!reducedMotion){secret.querySelectorAll('.si').forEach(el=>{el.addEventListener('mousemove',e=>{const r=el.getBoundingClientRect();el.style.transform=`translate(${(e.clientX-(r.left+r.width/2))*.35}px,${(e.clientY-(r.top+r.height/2))*.35}px)`;});el.addEventListener('mouseleave',()=>{el.style.transition='transform .5s cubic-bezier(.16,1,.3,1),color .3s';el.style.transform='';setTimeout(()=>el.style.transition='color .3s,transform .3s cubic-bezier(.16,1,.3,1)',.5e3);});});}
    if(navigator.vibrate)navigator.vibrate([100,50,100]);
    setTimeout(()=>{[hint,deskHint].forEach(h=>{if(h){h.style.opacity='0';setTimeout(()=>h.style.display='none',400);}});},3000);
}
function enableNearbyHints(){isNearby=true;if(isMobile){document.getElementById('shakeHint').style.display='block';initShake();}else{document.getElementById('deskHint').style.display='block';}}
if(params.has('s')){setTimeout(()=>revealContact(),3500);}else{
    const CAIRO_LAT=30.0444,CAIRO_LNG=31.2357,RADIUS_KM=25;
    function haversineKm(lat1,lon1,lat2,lon2){const R=6371,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)**2+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));}
    fetch('https://ip-api.com/json/?fields=lat,lon,city,status',{mode:'cors'}).then(r=>r.json()).then(data=>{if(data.status==='success'){const dist=haversineKm(data.lat,data.lon,CAIRO_LAT,CAIRO_LNG);if(dist<=RADIUS_KM)enableNearbyHints();}}).catch(()=>{});
}
function initShake(){const SHAKE_THRESHOLD=15,SHAKE_DURATION=2000;let shakeStart=0,shaking=false;const hint=document.getElementById('shakeHint'),bar=document.getElementById('shakeBar'),fill=document.getElementById('shakeFill');
function handleMotion(e){if(contactRevealed)return;const acc=e.accelerationIncludingGravity;if(!acc)return;const total=Math.sqrt(acc.x*acc.x+acc.y*acc.y+acc.z*acc.z),accelNet=Math.abs(total-9.81);
if(accelNet>SHAKE_THRESHOLD){if(!shaking){shaking=true;shakeStart=Date.now();hint.classList.add('shaking');bar.classList.add('active');}const elapsed=Date.now()-shakeStart,progress=Math.min(elapsed/SHAKE_DURATION*100,100);fill.style.width=progress+'%';if(elapsed>=SHAKE_DURATION){window.removeEventListener('devicemotion',handleMotion);fill.style.width='100%';revealContact();}}else{if(shaking){shaking=false;shakeStart=0;hint.classList.remove('shaking');bar.classList.remove('active');fill.style.width='0%';}}}
if(typeof DeviceMotionEvent!=='undefined'&&typeof DeviceMotionEvent.requestPermission==='function'){document.body.addEventListener('touchstart',function rp(){DeviceMotionEvent.requestPermission().then(r=>{if(r==='granted')window.addEventListener('devicemotion',handleMotion);}).catch(()=>{});document.body.removeEventListener('touchstart',rp);},{once:true});}else if(typeof DeviceMotionEvent!=='undefined'){window.addEventListener('devicemotion',handleMotion);}}
document.addEventListener('keydown',e=>{if(isNearby&&e.key==='s'&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&document.activeElement.tagName!=='INPUT')revealContact();});

// ‚ïê‚ïê‚ïê VCARD ‚ïê‚ïê‚ïê
window.downloadVCard=function(){const vcard=['BEGIN:VCARD','VERSION:3.0','N:Elharony;Amr;;;','FN:Amr Elharony','TITLE:Delivery Lead | Mentor | Fintech Author & Speaker','ORG:Banque Misr','TEL;TYPE=CELL:+201114260806','EMAIL;TYPE=INTERNET:a.elharony@gmail.com','URL:https://amrelharony.com','URL:https://bilingualexecutive.amrelharony.com/','URL:https://www.linkedin.com/in/amrmelharony','X-SOCIALPROFILE;TYPE=linkedin:https://www.linkedin.com/in/amrmelharony','X-SOCIALPROFILE;TYPE=telegram:https://t.me/Amrmelharony','NOTE:Scrum Master at Banque Misr. Author of The Bilingual Executive. DBA in Digital Transformation.','END:VCARD'].join('\r\n');
const blob=new Blob([vcard],{type:'text/vcard;charset=utf-8'}),url=URL.createObjectURL(blob),a=document.createElement('a');a.href=url;a.download='Amr_Elharony.vcf';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);
const btn=document.getElementById('vcBtn'),txt=document.getElementById('vcTxt'),icon=btn.querySelector('i');btn.classList.add('vcb-done');icon.className='fa-solid fa-check';txt.textContent='SAVED!';setTimeout(()=>{btn.classList.remove('vcb-done');icon.className='fa-solid fa-address-card';txt.textContent='Save Contact';},2500);};

// ‚ïê‚ïê‚ïê EASTER EGG (Konami Code + Double-tap logo) ‚ïê‚ïê‚ïê
const konami=[38,38,40,40,37,39,37,39,66,65];let kIdx=0;
document.addEventListener('keydown',e=>{if(e.keyCode===konami[kIdx]){kIdx++;if(kIdx===konami.length){kIdx=0;showEgg();}}else{kIdx=0;}});
let lastTap=0;document.getElementById('pfw').addEventListener('touchend',e=>{const now=Date.now();if(now-lastTap<300){e.preventDefault();showEgg();}lastTap=now;});
function showEgg(){const el=document.getElementById('easterEgg');el.classList.add('show');if(navigator.vibrate)navigator.vibrate([50,30,50,30,100]);}
window.closeEgg=function(){document.getElementById('easterEgg').classList.remove('show');};
// Escape handled by unified handler below

// ‚ïê‚ïê‚ïê ARABIC/ENGLISH TOGGLE ‚ïê‚ïê‚ïê
let isArabic=false;
const arData={
    name:'ÿπŸÖÿ±Ÿà ÿßŸÑÿ≠ÿßÿ±ŸàŸÜŸä',
    vp:'ÿ£ÿ≥ÿßÿπÿØ <strong>ÿßŸÑÿ®ŸÜŸàŸÉ ŸàŸÅŸêÿ±ŸÇ ÿßŸÑÿ™ŸÉŸÜŸàŸÑŸàÿ¨Ÿäÿß ÿßŸÑŸÖÿßŸÑŸäÿ©</strong> ÿπŸÑŸâ ÿ•ÿ∑ŸÑÿßŸÇ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ© ÿ®ÿ¥ŸÉŸÑ ÿ£ÿ≥ÿ±ÿπ ŸÖŸÜ ÿÆŸÑÿßŸÑ <strong>ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ±ÿ¥ŸäŸÇ ŸàÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ®ŸÜŸäÿ© ÿπŸÑŸâ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</strong>',
    roles:['ŸÇÿßÿ¶ÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ','ŸÖŸèÿ±ÿ¥ÿØ','ŸÖÿ§ŸÑŸÅ ŸàŸÖÿ™ÿ≠ÿØÿ´ ŸÅŸäŸÜÿ™ŸÉ'],
    imp:['ÿ≥ŸÜŸàÿßÿ™ ŸÅŸä ÿßŸÑÿ®ŸÜŸàŸÉ','ÿØŸÇÿßÿ¶ŸÇ ÿ•ÿ±ÿ¥ÿßÿØ','ŸÖŸÜÿµÿßÿ™ ÿ≠Ÿàÿßÿ±Ÿäÿ©'],
    ph:'ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿµŸàÿ±ÿ© ŸÑÿ±ŸÖÿ≤ QR'
};
const enData={
    name:'Amr Elharony',
    vp:'I help <strong>banks and FinTech teams</strong> ship digital products faster through <strong>agile delivery, data-driven decisions</strong>, and bridging the gap between business and technology.',
    roles:['Delivery Lead','Mentor','Fintech Author & Speaker'],
    imp:['Years in Banking','Mentoring Mins','Panel Stages'],
    ph:'TAP PHOTO FOR QR'
};
document.getElementById('langBtn').addEventListener('click',()=>{
    isArabic=!isArabic;
    const d=isArabic?arData:enData;
    document.documentElement.dir=isArabic?'rtl':'ltr';
    document.getElementById('langBtn').textContent=isArabic?'AR':'EN';
    document.getElementById('hname').innerHTML=`<span class="ng">${d.name}</span>`;
    document.getElementById('vpText').innerHTML=d.vp;
    const tags=document.querySelectorAll('.rt');tags.forEach((t,i)=>{if(d.roles[i])t.textContent=d.roles[i];});
    document.getElementById('impL1').textContent=d.imp[0];
    document.getElementById('impL2').textContent=d.imp[1];
    document.getElementById('impL3').textContent=d.imp[2];
    document.querySelector('.ph').textContent=d.ph;
});

// ‚ïê‚ïê‚ïê VISITOR COUNTER ‚ïê‚ïê‚ïê
(function(){
    // Uses countapi.xyz alternative ‚Äî simple localStorage + estimation
    let count=parseInt(localStorage.getItem('vc')||'0')+1;
    // Add randomized base to make it feel real
    const base=4200+Math.floor(count*1.3);
    localStorage.setItem('vc',count.toString());
    document.getElementById('visitorCount').textContent=`Visitor #${base.toLocaleString()}`;
})();

// ‚ïê‚ïê‚ïê DYNAMIC WEATHER BACKGROUND ‚ïê‚ïê‚ïê
(function(){
    fetch('https://wttr.in/Cairo?format=%C&m',{headers:{'Accept':'text/plain'}})
        .then(r=>r.text()).then(w=>{
            w=w.trim().toLowerCase();
            const mesh=document.querySelectorAll('.mesh div');
            if(w.includes('sun')||w.includes('clear')){
                mesh[0].style.background='#ff9500';mesh[1].style.background='#ff6b00';mesh[2].style.background='#ffcc00';
            }else if(w.includes('rain')||w.includes('drizzle')){
                mesh[0].style.background='#0077ff';mesh[1].style.background='#004499';mesh[2].style.background='#66aaff';
            }else if(w.includes('cloud')||w.includes('overcast')){
                mesh[0].style.background='#8899aa';mesh[1].style.background='#667788';mesh[2].style.background='#99aabb';
            }
            // night override
            const cairoH=parseInt(new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",hour12:false}));
            if(cairoH>=20||cairoH<5){mesh[0].style.background='#1a0a3e';mesh[1].style.background='#4a1a8a';mesh[2].style.background='#0a0a2e';}
        }).catch(()=>{});
})();

// ‚ïê‚ïê‚ïê AVAILABILITY ‚ïê‚ïê‚ïê
(function(){const h=parseInt(new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",hour12:false}));const d=new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",weekday:"long"});const el=document.getElementById('availTxt');if(d==='Friday'||d==='Saturday')el.textContent='Weekend ¬∑ Back Sunday 9AM Cairo';else if(h>=9&&h<17)el.textContent='Typically responds within 2 hours';else if(h>=17&&h<21)el.textContent='Evening ¬∑ Responds by tomorrow 9AM';else el.textContent='Offline ¬∑ Next available 9AM Cairo';})();

// ‚ïê‚ïê‚ïê AMBIENT SOUND ‚ïê‚ïê‚ïê
let audioCtx,sndPlaying=false;
document.getElementById('sndBtn').addEventListener('click',()=>{if(!audioCtx)audioCtx=new(window.AudioContext||window.webkitAudioContext)();if(sndPlaying){audioCtx.suspend();sndPlaying=false;document.getElementById('sndIcon').className='fa-solid fa-volume-xmark';}else{if(audioCtx.state==='suspended')audioCtx.resume();else{const g=audioCtx.createGain();g.gain.value=0.03;g.connect(audioCtx.destination);const o1=audioCtx.createOscillator();o1.type='sine';o1.frequency.value=80;o1.connect(g);o1.start();const o2=audioCtx.createOscillator();o2.type='sine';o2.frequency.value=120;const g2=audioCtx.createGain();g2.gain.value=0.015;o2.connect(g2);g2.connect(audioCtx.destination);o2.start();const lfo=audioCtx.createOscillator();lfo.type='sine';lfo.frequency.value=0.1;const lg=audioCtx.createGain();lg.gain.value=5;lfo.connect(lg);lg.connect(o1.frequency);lfo.start();}sndPlaying=true;document.getElementById('sndIcon').className='fa-solid fa-volume-high';}});
// Show sound button after preloader
setTimeout(()=>{document.getElementById('sndBtn').style.display='flex';},4000);

// ‚ïê‚ïê‚ïê SHARE CARD ‚ïê‚ïê‚ïê
window.openShare=function(){const c=document.getElementById('shareCanvas'),ctx=c.getContext('2d');const l=document.body.classList.contains('light-mode');ctx.fillStyle=l?'#f4f6fb':'#06080f';ctx.fillRect(0,0,600,340);const grd=ctx.createLinearGradient(0,0,600,0);grd.addColorStop(0,'#00e1ff');grd.addColorStop(1,'#6366f1');ctx.fillStyle=grd;ctx.fillRect(0,0,600,4);ctx.font='bold 32px Inter,sans-serif';ctx.fillStyle=l?'#0a0f1a':'#f0f2f5';ctx.fillText('Amr Elharony',40,80);ctx.font='14px monospace';ctx.fillStyle=l?'#5a6578':'#6b7a90';ctx.fillText('Delivery Lead ¬∑ Mentor ¬∑ Fintech Author',40,115);ctx.font='bold 20px monospace';ctx.fillStyle='#00e1ff';ctx.fillText('9+',40,200);ctx.fillText(getMentoringMins().toLocaleString()+'+',160,200);ctx.fillText('7+',370,200);ctx.font='8px monospace';ctx.fillStyle=l?'#5a6578':'#6b7a90';ctx.fillText('YEARS IN BANKING',40,218);ctx.fillText('MENTORING MINS',160,218);ctx.fillText('PANEL STAGES',370,218);ctx.font='12px monospace';ctx.fillStyle='#00e1ff';ctx.fillText('amrelharony.com',40,300);document.getElementById('shareOverlay').classList.add('show');};
window.closeShare=function(){document.getElementById('shareOverlay').classList.remove('show');};
window.downloadShareCard=function(){const a=document.createElement('a');a.download='Amr_Elharony_Card.png';a.href=document.getElementById('shareCanvas').toDataURL('image/png');a.click();};
window.copyShareLink=function(){navigator.clipboard.writeText('https://amrelharony.com').then(()=>{const b=document.querySelectorAll('.share-btn');b[1].textContent='‚úì Copied!';setTimeout(()=>{b[1].innerHTML='<i class="fa-solid fa-link" style="margin-right:4px"></i> Copy Link';},2000);});};
// Escape handled by unified handler

// ‚ïê‚ïê‚ïê STREAK ‚ïê‚ïê‚ïê
(function(){const today=new Date().toDateString(),last=localStorage.getItem('lastVisit');let streak=parseInt(localStorage.getItem('streak')||'0');if(last!==today){const yd=new Date();yd.setDate(yd.getDate()-1);streak=(last===yd.toDateString())?streak+1:1;}localStorage.setItem('streak',streak.toString());localStorage.setItem('lastVisit',today);if(streak>1)document.getElementById('streakCount').textContent=`üî• ${streak}-day visit streak`;})();

// ‚ïê‚ïê‚ïê LIVE LINKEDIN FEED ‚ïê‚ïê‚ïê
(async function(){
    const container = document.getElementById('linkedinFeed');
    
    // 1. Go to rss.app, create a feed for your LinkedIn profile URL.
    // 2. Paste the generated RSS link below:
    const myRssUrl = 'https://rss.app/feeds/9LkeDk2rdq1NPifG.xml'; 
    
    const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(myRssUrl)}`;

    try {
        const res = await fetch(proxyUrl);
        const data = await res.json();
        
        if (data.status === 'ok' && data.items.length > 0) {
            container.innerHTML = data.items.slice(0, 5).map(post => `
                <a href="${post.link}" target="_blank" rel="noopener" class="nl rv" style="opacity:1; transform:none;">
                    <div class="ni"><i class="fa-brands fa-linkedin" style="color:#0077b5;" aria-hidden="true"></i></div>
                    <span class="nlb" style="display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;">
                        ${post.title || 'View my latest post on LinkedIn'}
                    </span>
                    <i class="fa-solid fa-external-link-alt ne" aria-hidden="true"></i>
                </a>
            `).join('');
        } else {
            container.innerHTML = `<span class="nlb" style="font-size:12px; opacity:0.5;">No recent posts found.</span>`;
        }
    } catch (err) {
        container.innerHTML = `<span class="nlb" style="font-size:12px; color:var(--accent3);">Feed temporarily unavailable.</span>`;
    }
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYSTEM 1: VISITOR INTELLIGENCE ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const VDna=(function(){
    const k='v_dna';let p=JSON.parse(localStorage.getItem(k)||'{}');
    // Build DNA on every visit
    p.visits=(p.visits||0)+1;
    p.firstVisit=p.firstVisit||Date.now();
    p.lastVisit=Date.now();
    p.device=D?'desktop':'mobile';
    p.os=navigator.userAgent.match(/Windows/)?"Windows":navigator.userAgent.match(/Mac/)?"Mac":navigator.userAgent.match(/Android/)?"Android":navigator.userAgent.match(/iPhone|iPad/)?"iOS":"Other";
    p.browser=navigator.userAgent.match(/Chrome/)?"Chrome":navigator.userAgent.match(/Firefox/)?"Firefox":navigator.userAgent.match(/Safari/)?"Safari":"Other";
    p.screen=`${screen.width}x${screen.height}`;
    p.lang=navigator.language;
    p.tz=Intl.DateTimeFormat().resolvedOptions().timeZone;
    p.ref=params.get('ref')||document.referrer||'direct';
    p.scrollMax=p.scrollMax||0;
    p.clickedLinks=p.clickedLinks||[];
    p.sectionsViewed=p.sectionsViewed||[];
    p.achievements=p.achievements||[];
    p.xp=p.xp||0;
    p.level=p.level||1;
    p.challengeDate=p.challengeDate||'';
    p.challengeDone=p.challengeDone||false;
    p.lastScrollY=p.lastScrollY||0;
    p.smartCtaDismissed=p.smartCtaDismissed||false;
    p.sessionClicks=0;
    p.sessionStart=Date.now();
    function save(){localStorage.setItem(k,JSON.stringify(p));}
    save();
    return{get:()=>p,save,addXp(n){p.xp+=n;const lvls=[0,50,150,300,500,800,1200];const nl=lvls.findIndex(t=>p.xp<t);p.level=nl===-1?lvls.length:nl;save();updateXpUI();},addClick(id){if(!p.clickedLinks.includes(id)){p.clickedLinks.push(id);save();}p.sessionClicks++;},addSection(id){if(!p.sectionsViewed.includes(id)){p.sectionsViewed.push(id);save();}},setScroll(pct){if(pct>p.scrollMax){p.scrollMax=pct;save();}p.lastScrollY=window.scrollY;save();}};
})();

// 1b. Device/Battery/Network Adaptation
(function(){
    const p=VDna.get();
    // Battery: reduce animations if low
    if(navigator.getBattery){navigator.getBattery().then(b=>{if(b.level<0.2&&!b.charging){document.documentElement.style.setProperty('--glow','transparent');document.querySelectorAll('.mesh div').forEach(d=>d.style.opacity='0.02');}});}
    // Network: degrade on slow connections
    const conn=navigator.connection||navigator.mozConnection;
    if(conn&&(conn.effectiveType==='2g'||conn.effectiveType==='slow-2g')){
        document.querySelectorAll('.mesh div').forEach(d=>d.style.display='none');
        document.getElementById('bgC').style.display='none';
    }
    // Performance: reduce particles on low-end
    if(navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=2){
        window._lowEnd=true;
    }
})();

// 1c. Time-Aware Content Morphing
(function(){
    const h=parseInt(new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",hour12:false}));
    const vpEl=document.getElementById('vpText');
    const p=VDna.get();
    if(p.visits>2){
        // Returning visitor: skip generic intro
    } else if(h>=6&&h<12){
        // Morning: productivity
    } else if(h>=22||h<6){
        // Night owl: special accent
        document.documentElement.style.setProperty('--accent','#ff6b9d');
        document.documentElement.style.setProperty('--glowS','rgba(255,107,157,0.4)');
        document.documentElement.style.setProperty('--glow','rgba(255,107,157,0.15)');
    }
})();

// 1d. Return Visitor Memory
(function(){
    const p=VDna.get();
    if(p.visits>1&&p.lastScrollY>200){
        setTimeout(()=>{if(document.body.style.overflow==='auto')window.scrollTo({top:Math.min(p.lastScrollY,document.body.scrollHeight-window.innerHeight),behavior:'smooth'});},4500);
    }
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYSTEM 2: ENGAGEMENT ANALYTICS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// 2a. Scroll Depth Tracker
const scrollMilestones={25:false,50:false,75:false,100:false};
function trackScroll(){
    const pct=Math.round(scrollY/(document.documentElement.scrollHeight-innerHeight)*100);
    VDna.setScroll(pct);
    [25,50,75,100].forEach(m=>{if(pct>=m&&!scrollMilestones[m]){scrollMilestones[m]=true;VDna.addXp(1);if(m===100)Achieve.check('explorer');}});
}

// 2b. Section Dwell Time (Intersection Observer)
const sectionTimes={};
const sectionObs=new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
        const id=e.target.dataset.section||e.target.id||'unknown';
        if(e.isIntersecting){sectionTimes[id]=Date.now();VDna.addSection(id);}
        else if(sectionTimes[id]){const dwell=Date.now()-sectionTimes[id];delete sectionTimes[id];}
    });
},{threshold:0.3});
setTimeout(()=>{document.querySelectorAll('.rv,[data-section]').forEach(el=>{if(!el.dataset.section){el.dataset.section=el.className.split(' ')[0]||'sec-'+Math.random().toString(36).slice(2,6);}sectionObs.observe(el);});},4000);

// 2c. Click Attribution
document.addEventListener('click',e=>{
    const link=e.target.closest('a[href],button[onclick],.qp,.lk,.nl,.vcb');
    if(link){
        const id=link.href||link.textContent.trim().slice(0,30);
        VDna.addClick(id);
        VDna.addXp(5);
        Achieve.check('connector');
        // Check newsletter clicks for scholar
        const href=link.href||'';
        if(href.includes('newsletter')||href.includes('levelup')){
            const p=VDna.get();
            const nlClicks=p.clickedLinks.filter(l=>l.includes('newsletter')||l.includes('levelup'));
            if(nlClicks.length>=3)Achieve.check('scholar');
        }
        ChallengeSystem.checkProgress();
    }
});

// 2d. Engagement Score
function getEngagementScore(){
    const p=VDna.get();
    const scrollScore=Math.min(p.scrollMax/100*30,30);
    const timeScore=Math.min((Date.now()-p.sessionStart)/120000*20,20);
    const sectionScore=Math.min(p.sectionsViewed.length/8*20,20);
    const clickScore=Math.min(p.sessionClicks/3*15,15);
    const returnScore=Math.min(p.visits/3*15,15);
    return Math.round(scrollScore+timeScore+sectionScore+clickScore+returnScore);
}

// 2e. Smart CTA Escalation
let smartCtaShown=false;
function checkSmartCta(){
    const p=VDna.get();
    if(p.smartCtaDismissed||smartCtaShown)return;
    const score=getEngagementScore();
    if(score>=65){
        showSmartCta('high');smartCtaShown=true;
    } else if(score<25&&(Date.now()-p.sessionStart)>15000){
        showSmartCta('low');smartCtaShown=true;
    }
}
function showSmartCta(type){
    const cta=document.getElementById('smartCta'),link=document.getElementById('smartCtaLink'),title=document.getElementById('smartCtaTitle'),sub=document.getElementById('smartCtaSub'),icon=document.getElementById('smartCtaIcon');
    if(type==='high'){
        link.href='https://calendly.com/amrmelharony/30min';
        title.textContent="You seem interested ‚Äî let's chat";
        sub.textContent='Book a free 30-minute call';
        icon.innerHTML='<i class="fa-solid fa-calendar-check"></i>';
    } else {
        link.href='https://www.linkedin.com/newsletters/levelup-your-leadership-6872921030353031168';
        title.textContent="Grab a free insight before you go";
        sub.textContent='Join 500+ leaders reading LevelUp';
        icon.innerHTML='<i class="fa-solid fa-envelope-open-text"></i>';
    }
    cta.classList.add('show');
    VDna.addXp(2);
}
window.dismissSmartCta=function(){
    document.getElementById('smartCta').classList.remove('show');
    const p=VDna.get();p.smartCtaDismissed=true;VDna.save();
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYSTEM 3: DYNAMIC CONTENT ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// 3a. Contextual Hero (referrer-based)
(function(){
    const p=VDna.get();
    const vpEl=document.getElementById('vpText');
    if(p.visits>2&&vpEl){
        // Returning visitor: more personal
    }
    // Referrer-based adjustments handled by existing refMap
})();

// 3b. Personalized Recommendations
function showRecommendation(){
    const p=VDna.get();
    const container=document.getElementById('recContainer');
    if(!container)return;
    const clicked=p.clickedLinks.join(' ').toLowerCase();
    let rec=null;
    if(clicked.includes('adplist')||clicked.includes('mentor')){
        rec={icon:'fa-book',label:'Since you like mentoring...',title:'Read The Bilingual Executive',href:'https://bilingualexecutive.amrelharony.com/'};
    } else if(clicked.includes('bilingual')||clicked.includes('book')){
        rec={icon:'fa-users',label:'Loved the book?',title:'Join Fintech Bilinguals Community',href:'https://www.linkedin.com/company/fintech-bilinguals'};
    } else if(clicked.includes('fintech')){
        rec={icon:'fa-graduation-cap',label:'Want to go deeper?',title:'Get Free 1:1 Agile Coaching',href:'https://adplist.org/mentors/amr-elharony'};
    } else if(p.visits>1){
        rec={icon:'fa-calendar-check',label:'Ready to connect?',title:'Book a 30-Min Call with Amr',href:'https://calendly.com/amrmelharony/30min'};
    }
    if(rec){
        container.innerHTML=`<a href="${rec.href}" target="_blank" rel="noopener" class="rec-card"><div class="rec-icon"><i class="fa-solid ${rec.icon}"></i></div><div class="rec-meta"><div class="rec-label">${rec.label}</div><div class="rec-title">${rec.title}</div></div><div style="color:var(--sub);opacity:.4"><i class="fa-solid fa-arrow-right"></i></div></a>`;
    }
}
setTimeout(showRecommendation,5000);

// 3c. Live Typing Console
const consoleMessages=[
    ()=>`Amr is currently in Cairo ¬∑ ${new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",minute:"numeric",hour12:true})}`,
    ()=>`${VDna.get().visits===1?'Welcome, new visitor':'Welcome back'} ¬∑ Visit #${VDna.get().visits}`,
    ()=>{const m=1000+Math.floor(((Date.now()-new Date('2023-10-01').getTime())/2592000000)*80);return `${m.toLocaleString()}+ mentoring minutes and counting...`;},
    ()=>`Engagement score: ${getEngagementScore()}/100`,
    ()=>`Your device: ${VDna.get().device} ¬∑ ${VDna.get().os} ¬∑ ${VDna.get().browser}`,
    ()=>`${VDna.get().achievements.length}/${10} achievements unlocked`,
    ()=>`Running on ${navigator.hardwareConcurrency||'?'} cores ¬∑ ${VDna.get().screen}`,
    ()=>'System status: all modules operational ‚úì',
];
let consoleIdx=0;
function typeConsole(){
    const el=document.getElementById('liveConsole');if(!el)return;
    const msg=consoleMessages[consoleIdx%consoleMessages.length]();
    consoleIdx++;
    let i=0;el.textContent='';
    const iv=setInterval(()=>{if(i<msg.length){el.textContent=msg.slice(0,i+1);i++;}else{el.innerHTML=msg+'<span class="cursor-blink"> ‚ñä</span>';clearInterval(iv);}},30);
}
setTimeout(()=>{typeConsole();setInterval(typeConsole,8000);},5000);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SYSTEM 4: GAMIFICATION LAYER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const BADGES=[
    {id:'explorer',emoji:'üîç',name:'Explorer',desc:'Scrolled to 100%'},
    {id:'regular',emoji:'üîÑ',name:'Regular',desc:'Visited 3+ times'},
    {id:'connector',emoji:'ü§ù',name:'Connector',desc:'Clicked a link'},
    {id:'scholar',emoji:'üìñ',name:'Scholar',desc:'Visited all 3 newsletters'},
    {id:'nightowl',emoji:'üåô',name:'Night Owl',desc:'Visited midnight‚Äì5AM'},
    {id:'secret',emoji:'ü§´',name:'Secret Agent',desc:'Found the easter egg'},
    {id:'shaker',emoji:'üì±',name:'Shaker',desc:'Unlocked contact section'},
    {id:'streak5',emoji:'üî•',name:'Streak Master',desc:'5+ day visit streak'},
    {id:'globe',emoji:'üåç',name:'Globetrotter',desc:'Visited from outside Egypt'},
    {id:'speed',emoji:'‚ö°',name:'Speed Reader',desc:'Reached bottom in <30s'},
];

const Achieve=(function(){
    function check(id){
        const p=VDna.get();
        if(p.achievements.includes(id))return;
        const badge=BADGES.find(b=>b.id===id);
        if(!badge)return;
        p.achievements.push(id);VDna.save();
        VDna.addXp(25);
        showToast(badge);
        ChallengeSystem.checkProgress();
    }
    return{check};
})();

// Toast System
function showToast(badge){
    const container=document.getElementById('toastContainer');
    const toast=document.createElement('div');
    toast.className='toast';
    toast.innerHTML=`<div class="toast-emoji">${badge.emoji}</div><div class="toast-body"><div class="toast-title">Achievement Unlocked!</div><div class="toast-desc">${badge.name} ‚Äî ${badge.desc}</div><div class="toast-xp">+25 XP</div></div>`;
    container.appendChild(toast);
    setTimeout(()=>toast.classList.add('show'),50);
    setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>toast.remove(),500);},4000);
    if(navigator.vibrate)navigator.vibrate([100,50,100,50,200]);
}

// XP UI
function updateXpUI(){
    const p=VDna.get();
    const lvls=[0,50,150,300,500,800,1200];
    const currLvlXp=lvls[p.level-1]||0;
    const nextLvlXp=lvls[p.level]||lvls[lvls.length-1];
    const pct=Math.min(((p.xp-currLvlXp)/(nextLvlXp-currLvlXp))*100,100);
    const xpText=document.getElementById('xpText');
    const xpFill=document.getElementById('xpBarFill');
    const xpLvl=document.getElementById('xpLevel');
    if(xpText)xpText.textContent=p.xp+' XP';
    if(xpFill)xpFill.style.width=pct+'%';
    if(xpLvl)xpLvl.textContent='LVL '+p.level;
}
setTimeout(updateXpUI,3000);

// Trophy Case
function openTrophy(){
    const p=VDna.get();
    const grid=document.getElementById('trophyGrid');
    grid.innerHTML=BADGES.map(b=>{
        const unlocked=p.achievements.includes(b.id);
        return `<div class="trophy-badge ${unlocked?'unlocked':'locked'}"><div class="trophy-badge-emoji">${unlocked?b.emoji:'üîí'}</div><div class="trophy-badge-name">${b.name}</div><div class="trophy-badge-desc">${b.desc}</div></div>`;
    }).join('');
    // XP bar in trophy
    const lvls=[0,50,150,300,500,800,1200];
    const currLvlXp=lvls[p.level-1]||0;
    const nextLvlXp=lvls[p.level]||lvls[lvls.length-1];
    const pct=Math.min(((p.xp-currLvlXp)/(nextLvlXp-currLvlXp))*100,100);
    document.getElementById('trophyXpFill').style.width=pct+'%';
    document.getElementById('trophyLevel').textContent=`Level ${p.level} ¬∑ ${p.xp} XP ¬∑ ${p.achievements.length}/${BADGES.length} badges`;
    document.getElementById('trophyOverlay').classList.add('show');
}
window.closeTrophy=function(){document.getElementById('trophyOverlay').classList.remove('show');};
document.addEventListener('keydown',e=>{
    if(e.key==='t'&&!e.ctrlKey&&!e.metaKey&&document.activeElement.tagName!=='INPUT')openTrophy();
    if(e.key==='Escape'){closeEgg();closeShare();closeTrophy();}
});
setTimeout(()=>{const btn=document.getElementById('trophyBtn');btn.style.display='flex';btn.addEventListener('click',openTrophy);},4000);

// Auto-check achievements on load
(function(){
    const p=VDna.get();
    // Regular: 3+ visits
    if(p.visits>=3)Achieve.check('regular');
    // Night Owl: midnight-5AM Cairo
    const cairoH=parseInt(new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo",hour:"numeric",hour12:false}));
    if(cairoH>=0&&cairoH<5)Achieve.check('nightowl');
    // Streak Master: 5+ streak
    const streak=parseInt(localStorage.getItem('streak')||'0');
    if(streak>=5)Achieve.check('streak5');
    // Speed Reader: set timer
    const loadTime=Date.now();
    const speedCheck=()=>{
        const pct=scrollY/(document.documentElement.scrollHeight-innerHeight);
        if(pct>0.95&&(Date.now()-loadTime)<30000)Achieve.check('speed');
    };
    addEventListener('scroll',speedCheck,{passive:true});
    setTimeout(()=>removeEventListener('scroll',speedCheck),35000);
    // Globe: check via IP (already fetched)
    if(p.tz&&!p.tz.includes('Cairo')&&!p.tz.includes('Africa'))Achieve.check('globe');
})();

// Hook easter egg achievement
const origShowEgg=showEgg;
showEgg=function(){origShowEgg();Achieve.check('secret');};
// Hook shake contact achievement
const origReveal=revealContact;
revealContact=function(){origReveal();Achieve.check('shaker');};

// 4e. Daily Challenge System
const ChallengeSystem=(function(){
    const challenges=[
        {id:'scroll100',text:'Scroll to the very bottom of the page',check:()=>VDna.get().scrollMax>=98},
        {id:'click3',text:'Click on 3 different links',check:()=>VDna.get().sessionClicks>=3},
        {id:'trophy',text:'Open the trophy case (press T)',check:()=>document.getElementById('trophyOverlay').classList.contains('show')},
        {id:'theme',text:'Try both light and dark themes',check:()=>!!localStorage.getItem('theme_switched')},
        {id:'share',text:'Generate and share your profile card',check:()=>!!localStorage.getItem('shared_card')},
        {id:'easter',text:'Find the hidden easter egg',check:()=>VDna.get().achievements.includes('secret')},
        {id:'allnl',text:'Visit all 3 newsletter links',check:()=>VDna.get().achievements.includes('scholar')},
    ];
    const today=new Date().toDateString();
    const dayIdx=Math.floor(Date.now()/86400000)%challenges.length;
    const todayChallenge=challenges[dayIdx];
    const p=VDna.get();
    const completed=p.challengeDate===today&&p.challengeDone;

    function render(){
        const el=document.getElementById('challengeText');
        const prog=document.getElementById('challengeProgress');
        const icon=document.getElementById('challengeIcon');
        const card=document.getElementById('dailyChallenge');
        if(!el)return;
        el.textContent=todayChallenge.text;
        if(completed||p.challengeDone&&p.challengeDate===today){
            prog.textContent='‚úì DONE';icon.textContent='‚úÖ';card.classList.add('completed');
        } else {
            prog.textContent='0/1';
        }
    }
    function checkProgress(){
        if(completed)return;
        if(todayChallenge.check()){
            const p2=VDna.get();p2.challengeDate=today;p2.challengeDone=true;VDna.save();
            VDna.addXp(15);
            const el=document.getElementById('challengeProgress');
            const icon=document.getElementById('challengeIcon');
            const card=document.getElementById('dailyChallenge');
            if(el){el.textContent='‚úì DONE';icon.textContent='‚úÖ';card.classList.add('completed');}
            showToast({emoji:'üéØ',name:'Challenge Complete',desc:todayChallenge.text+' ¬∑ +15 XP'});
        }
    }
    // Reset challenge if new day
    if(p.challengeDate!==today){p.challengeDate=today;p.challengeDone=false;VDna.save();}
    setTimeout(render,3000);
    // Check periodically
    setInterval(checkProgress,3000);
    return{checkProgress};
})();

// Hook theme switch for challenge tracking
const origThemeBtn=document.getElementById('tbtn');
origThemeBtn.addEventListener('click',()=>{localStorage.setItem('theme_switched','1');ChallengeSystem.checkProgress();});

// Hook share for challenge tracking
const origOpenShare=window.openShare;
window.openShare=function(){origOpenShare();localStorage.setItem('shared_card','1');ChallengeSystem.checkProgress();};

// Engagement check interval
setInterval(()=>{checkSmartCta();ChallengeSystem.checkProgress();},5000);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FEATURE: VISITOR MAP GLOBE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
(function(){
    const c=document.getElementById('globeCanvas');if(!c)return;
    const ctx=c.getContext('2d'),W=180,H=180,cx=W/2,cy=H/2,R=70;
    // Simulated visitor locations (lat,lng pairs) ‚Äî seed + real visitor via timezone
    const visitors=[
        [30.04,31.24],[25.27,55.30],[51.51,-0.13],[40.71,-74.01],[48.86,2.35],
        [35.68,139.69],[1.35,103.82],[-33.87,151.21],[55.75,37.62],[19.43,-99.13],
        [37.57,126.98],[28.61,77.21],[41.01,28.98],[33.89,35.50],[-23.55,-46.63],
        [52.52,13.41],[39.92,32.85],[36.19,44.01],[24.71,46.68],[31.95,35.93]
    ];
    // Add visitor's own location based on timezone offset
    const myOffset=-new Date().getTimezoneOffset()/60;
    const approxLng=myOffset*15;
    visitors.push([30+Math.random()*20-10,approxLng+Math.random()*10-5]);

    let rot=0;
    function project(lat,lng){
        const phi=(90-lat)*Math.PI/180,theta=(lng+rot)*Math.PI/180;
        const x=R*Math.sin(phi)*Math.cos(theta),y=-R*Math.cos(phi),z=R*Math.sin(phi)*Math.sin(theta);
        return{x:cx+x,y:cy+y,z,vis:z>-10};
    }
    function drawGlobe(){
        ctx.clearRect(0,0,W,H);
        // Globe sphere
        const grd=ctx.createRadialGradient(cx-15,cy-15,5,cx,cy,R);
        const isDark=!document.body.classList.contains('light-mode');
        grd.addColorStop(0,isDark?'rgba(20,30,50,.6)':'rgba(200,210,230,.4)');
        grd.addColorStop(1,isDark?'rgba(6,8,15,.8)':'rgba(240,245,255,.6)');
        ctx.beginPath();ctx.arc(cx,cy,R,0,Math.PI*2);ctx.fillStyle=grd;ctx.fill();
        ctx.strokeStyle=isDark?'rgba(0,225,255,.1)':'rgba(0,102,255,.1)';ctx.lineWidth=1;ctx.stroke();
        // Grid lines (meridians + parallels)
        ctx.strokeStyle=isDark?'rgba(0,225,255,.04)':'rgba(0,102,255,.04)';ctx.lineWidth=.5;
        for(let lng=-180;lng<180;lng+=30){
            ctx.beginPath();
            for(let lat=-90;lat<=90;lat+=3){const p=project(lat,lng);if(p.vis){if(lat===-90)ctx.moveTo(p.x,p.y);else ctx.lineTo(p.x,p.y);}}
            ctx.stroke();
        }
        for(let lat=-60;lat<=60;lat+=30){
            ctx.beginPath();
            for(let lng=-180;lng<=180;lng+=3){const p=project(lat,lng);if(p.vis){if(lng===-180)ctx.moveTo(p.x,p.y);else ctx.lineTo(p.x,p.y);}}
            ctx.stroke();
        }
        // Rough continent outlines (simplified world map points)
        const continents=[
            // Africa
            [[35,10],[30,30],[10,40],[0,40],[-5,30],[-15,40],[-35,20],[-35,25],[-20,35],[5,50],[15,50],[30,35],[37,10],[35,-5],[35,10]],
            // Europe
            [[48,-5],[43,0],[36,-5],[36,25],[40,30],[42,45],[48,40],[55,25],[60,30],[70,30],[65,45],[55,50],[48,10],[48,-5]],
            // Asia
            [[70,40],[60,60],[50,80],[40,75],[30,70],[25,55],[10,80],[0,100],[5,105],[15,105],[25,120],[35,130],[40,140],[45,135],[55,130],[55,80],[65,60],[70,40]],
            // North America
            [[50,-60],[45,-70],[30,-80],[25,-80],[20,-100],[30,-105],[35,-120],[50,-125],[60,-140],[65,-165],[70,-160],[70,-100],[60,-75],[50,-55],[50,-60]],
            // South America
            [[10,-75],[5,-60],[0,-50],[-5,-35],[-15,-40],[-25,-50],[-35,-55],[-55,-70],[-50,-75],[-20,-70],[-5,-80],[10,-75]],
            // Australia
            [[-15,130],[-20,115],[-30,115],[-35,138],[-38,145],[-30,153],[-20,150],[-12,135],[-15,130]]
        ];
        ctx.strokeStyle=isDark?'rgba(0,225,255,.12)':'rgba(0,102,255,.12)';ctx.lineWidth=.8;
        continents.forEach(pts=>{
            ctx.beginPath();let started=false;
            pts.forEach(([lat,lng])=>{const p=project(lat,lng);if(p.vis){if(!started){ctx.moveTo(p.x,p.y);started=true;}else ctx.lineTo(p.x,p.y);}else started=false;});
            ctx.stroke();
        });
        // Visitor dots
        visitors.forEach(([lat,lng],i)=>{
            const p=project(lat,lng);
            if(p.vis){
                const alpha=0.3+p.z/R*0.6;
                const pulse=Math.sin(Date.now()/800+i)*0.3+0.7;
                ctx.beginPath();ctx.arc(p.x,p.y,2.5*pulse,0,Math.PI*2);
                ctx.fillStyle=isDark?`rgba(0,225,255,${alpha*pulse})`:`rgba(0,102,255,${alpha*pulse})`;
                ctx.fill();
                // Glow
                ctx.beginPath();ctx.arc(p.x,p.y,5,0,Math.PI*2);
                ctx.fillStyle=isDark?`rgba(0,225,255,${alpha*0.1})`:`rgba(0,102,255,${alpha*0.1})`;
                ctx.fill();
            }
        });
        rot+=0.15;
    }
    let globeAnim;
    function startGlobe(){if(!globeAnim)globeAnim=setInterval(drawGlobe,50);}
    function stopGlobe(){if(globeAnim){clearInterval(globeAnim);globeAnim=null;}}
    // Only animate when visible
    const gObs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting)startGlobe();else stopGlobe();});},{threshold:0.1});
    gObs.observe(c);
    drawGlobe();
    // Visitor count
    const gc=document.getElementById('globeCount');
    if(gc){const base=180+parseInt(localStorage.getItem('vc')||'0');gc.textContent=base+' visitors from '+visitors.length+' locations';}
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FEATURE: AR BUSINESS CARD (QR vCard)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.openAr=function(){
    const qrContainer=document.getElementById('arQr');
    // Generate QR code with vCard data encoded as URL
    const vcard=encodeURIComponent([
        'BEGIN:VCARD','VERSION:3.0','N:Elharony;Amr','FN:Amr Elharony',
        'TITLE:Delivery Lead | Mentor | Fintech Author & Speaker','ORG:Banque Misr',
        'EMAIL:a.elharony@gmail.com','URL:https://amrelharony.com',
        'URL:https://bilingualexecutive.amrelharony.com/',
        'URL:https://www.linkedin.com/in/amrmelharony',
        'NOTE:Scrum Master at Banque Misr. Author of The Bilingual Executive.',
        'END:VCARD'
    ].join('\n'));
    // Use QR API
    qrContainer.innerHTML=`<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${vcard}&format=png&qzone=1&color=00e1ff&bgcolor=ffffff" alt="AR Business Card QR" style="width:100%;height:100%;border-radius:4px;">`;
    document.getElementById('arOverlay').classList.add('show');
};
window.closeAr=function(){document.getElementById('arOverlay').classList.remove('show');};
window.downloadArQr=function(){
    const img=document.querySelector('#arQr img');
    if(img){const a=document.createElement('a');a.href=img.src;a.download='Amr_Elharony_QR.png';a.target='_blank';a.click();}
};
window.shareArCard=function(){
    if(navigator.share){
        navigator.share({title:'Amr Elharony ‚Äî Business Card',text:'Scan to save contact',url:'https://amrelharony.com'}).catch(()=>{});
    } else {
        navigator.clipboard.writeText('https://amrelharony.com').then(()=>{
            const btns=document.querySelectorAll('.ar-btn');
            btns[1].textContent='‚úì Copied!';
            setTimeout(()=>{btns[1].innerHTML='<i class="fa-solid fa-share" style="margin-right:4px"></i>Share';},2000);
        });
    }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FEATURE: MICRO-ANIMATIONS (Scroll-triggered)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
(function(){
    if(reducedMotion)return;
    // Apply animation classes to sections
    const targets=[
        {sel:'.imp',cls:'sa-up'},{sel:'.ticker-wrap',cls:'sa-up'},
        {sel:'.conf-strip',cls:'sa-left'},{sel:'.avail',cls:'sa-up'},
        {sel:'.reading-card',cls:'sa-right'},{sel:'.cert-card',cls:'sa-scale'},
        {sel:'.tl-item.tl-era',cls:'sa-left'},{sel:'.insight-card',cls:'sa-right'},
        {sel:'.qp',cls:'sa-up'},{sel:'.challenge-card',cls:'sa-up'},
        {sel:'.globe-wrap',cls:'sa-scale'},{sel:'.lk',cls:'sa-up'},
        {sel:'.nl',cls:'sa-left'}
    ];
    targets.forEach(({sel,cls})=>{
        document.querySelectorAll(sel).forEach(el=>{
            if(!el.classList.contains('sa')){el.classList.add('sa',cls);}
        });
    });
    // Intersection Observer for triggering
    const saObs=new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
            if(e.isIntersecting){
                // Stagger children of same parent
                const parent=e.target.parentElement;
                const siblings=Array.from(parent.querySelectorAll('.sa:not(.vis)'));
                const idx=siblings.indexOf(e.target);
                setTimeout(()=>{e.target.classList.add('vis');},idx*80);
                saObs.unobserve(e.target);
            }
        });
    },{threshold:0.15,rootMargin:'0px 0px -40px 0px'});
    // Wait for preloader then observe
    setTimeout(()=>{
        document.querySelectorAll('.sa').forEach(el=>saObs.observe(el));
    },4200);
})();

// Hook AR overlay to Escape
const origEscHandler=document.onkeydown;
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeAr();});

// ‚ïê‚ïê‚ïê SCROLL & PARALLAX ‚ïê‚ïê‚ïê
addEventListener('scroll',()=>{const t=scrollY,h=document.documentElement.scrollHeight-innerHeight;document.getElementById('sbar').style.width=(h>0?t/h*100:0)+'%';trackScroll();},{passive:true});
if(!reducedMotion){addEventListener('scroll',()=>{const y=scrollY;document.querySelectorAll('.mesh div').forEach((b,i)=>{b.style.transform=`translateY(${y*(i+1)*.06}px)`;});},{passive:true});}
})();
</script>
</body>
</html>
